<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>db_repository.versions package &mdash; The Periodic Table Project 1.0 documentation</title>
    
    <link rel="stylesheet" href="_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '1.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="The Periodic Table Project 1.0 documentation" href="index.html" />
   
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9">

  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">The Periodic Table Project 1.0 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="db-repository-versions-package">
<h1>db_repository.versions package<a class="headerlink" href="#db-repository-versions-package" title="Permalink to this headline">¶</a></h1>
<div class="section" id="submodules">
<h2>Submodules<a class="headerlink" href="#submodules" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="module-db_repository.versions.001_migration">
<span id="db-repository-versions-001-migration-module"></span><h2>db_repository.versions.001_migration module<a class="headerlink" href="#module-db_repository.versions.001_migration" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="db_repository.versions.001_migration.and_">
<code class="descclassname">db_repository.versions.001_migration.</code><code class="descname">and_</code><span class="sig-paren">(</span><em>*clauses</em><span class="sig-paren">)</span><a class="headerlink" href="#db_repository.versions.001_migration.and_" title="Permalink to this definition">¶</a></dt>
<dd><p>Produce a conjunction of expressions joined by <code class="docutils literal"><span class="pre">AND</span></code>.</p>
<p>E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">and_</span>

<span class="n">stmt</span> <span class="o">=</span> <span class="n">select</span><span class="p">([</span><span class="n">users_table</span><span class="p">])</span><span class="o">.</span><span class="n">where</span><span class="p">(</span>
                <span class="n">and_</span><span class="p">(</span>
                    <span class="n">users_table</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="s">&#39;wendy&#39;</span><span class="p">,</span>
                    <span class="n">users_table</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">enrolled</span> <span class="o">==</span> <span class="bp">True</span>
                <span class="p">)</span>
            <span class="p">)</span>
</pre></div>
</div>
<p>The <a class="reference internal" href="#db_repository.versions.001_migration.and_" title="db_repository.versions.001_migration.and_"><code class="xref py py-func docutils literal"><span class="pre">and_()</span></code></a> conjunction is also available using the
Python <code class="docutils literal"><span class="pre">&amp;</span></code> operator (though note that compound expressions
need to be parenthesized in order to function with Python
operator precedence behavior):</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">stmt</span> <span class="o">=</span> <span class="n">select</span><span class="p">([</span><span class="n">users_table</span><span class="p">])</span><span class="o">.</span><span class="n">where</span><span class="p">(</span>
                <span class="p">(</span><span class="n">users_table</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="s">&#39;wendy&#39;</span><span class="p">)</span> <span class="o">&amp;</span>
                <span class="p">(</span><span class="n">users_table</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">enrolled</span> <span class="o">==</span> <span class="bp">True</span><span class="p">)</span>
            <span class="p">)</span>
</pre></div>
</div>
<p>The <a class="reference internal" href="#db_repository.versions.001_migration.and_" title="db_repository.versions.001_migration.and_"><code class="xref py py-func docutils literal"><span class="pre">and_()</span></code></a> operation is also implicit in some cases;
the <code class="xref py py-meth docutils literal"><span class="pre">Select.where()</span></code> method for example can be invoked multiple
times against a statement, which will have the effect of each
clause being combined using <a class="reference internal" href="#db_repository.versions.001_migration.and_" title="db_repository.versions.001_migration.and_"><code class="xref py py-func docutils literal"><span class="pre">and_()</span></code></a>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">stmt</span> <span class="o">=</span> <span class="n">select</span><span class="p">([</span><span class="n">users_table</span><span class="p">])</span><span class="o">.</span>\
            <span class="n">where</span><span class="p">(</span><span class="n">users_table</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="s">&#39;wendy&#39;</span><span class="p">)</span><span class="o">.</span>\
            <span class="n">where</span><span class="p">(</span><span class="n">users_table</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">enrolled</span> <span class="o">==</span> <span class="bp">True</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="#db_repository.versions.001_migration.or_" title="db_repository.versions.001_migration.or_"><code class="xref py py-func docutils literal"><span class="pre">or_()</span></code></a></p>
</div>
</dd></dl>

<dl class="function">
<dt id="db_repository.versions.001_migration.asc">
<code class="descclassname">db_repository.versions.001_migration.</code><code class="descname">asc</code><span class="sig-paren">(</span><em>column</em><span class="sig-paren">)</span><a class="headerlink" href="#db_repository.versions.001_migration.asc" title="Permalink to this definition">¶</a></dt>
<dd><p>Produce an ascending <code class="docutils literal"><span class="pre">ORDER</span> <span class="pre">BY</span></code> clause element.</p>
<p>e.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">asc</span>
<span class="n">stmt</span> <span class="o">=</span> <span class="n">select</span><span class="p">([</span><span class="n">users_table</span><span class="p">])</span><span class="o">.</span><span class="n">order_by</span><span class="p">(</span><span class="n">asc</span><span class="p">(</span><span class="n">users_table</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">name</span><span class="p">))</span>
</pre></div>
</div>
<p>will produce SQL as:</p>
<div class="highlight-python"><div class="highlight"><pre>SELECT id, name FROM user ORDER BY name ASC
</pre></div>
</div>
<p>The <a class="reference internal" href="#db_repository.versions.001_migration.asc" title="db_repository.versions.001_migration.asc"><code class="xref py py-func docutils literal"><span class="pre">asc()</span></code></a> function is a standalone version of the
<code class="xref py py-meth docutils literal"><span class="pre">ColumnElement.asc()</span></code> method available on all SQL expressions,
e.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">stmt</span> <span class="o">=</span> <span class="n">select</span><span class="p">([</span><span class="n">users_table</span><span class="p">])</span><span class="o">.</span><span class="n">order_by</span><span class="p">(</span><span class="n">users_table</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">name</span><span class="o">.</span><span class="n">asc</span><span class="p">())</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>column</strong> &#8211; A <code class="xref py py-class docutils literal"><span class="pre">ColumnElement</span></code> (e.g. scalar SQL expression)
with which to apply the <a class="reference internal" href="#db_repository.versions.001_migration.asc" title="db_repository.versions.001_migration.asc"><code class="xref py py-func docutils literal"><span class="pre">asc()</span></code></a> operation.</td>
</tr>
</tbody>
</table>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p><a class="reference internal" href="#db_repository.versions.001_migration.desc" title="db_repository.versions.001_migration.desc"><code class="xref py py-func docutils literal"><span class="pre">desc()</span></code></a></p>
<p><code class="xref py py-func docutils literal"><span class="pre">nullsfirst()</span></code></p>
<p><code class="xref py py-func docutils literal"><span class="pre">nullslast()</span></code></p>
<p class="last"><code class="xref py py-meth docutils literal"><span class="pre">Select.order_by()</span></code></p>
</div>
</dd></dl>

<dl class="function">
<dt id="db_repository.versions.001_migration.bindparam">
<code class="descclassname">db_repository.versions.001_migration.</code><code class="descname">bindparam</code><span class="sig-paren">(</span><em>key</em>, <em>value=symbol('NO_ARG')</em>, <em>type_=None</em>, <em>unique=False</em>, <em>required=symbol('NO_ARG')</em>, <em>quote=None</em>, <em>callable_=None</em>, <em>isoutparam=False</em>, <em>_compared_to_operator=None</em>, <em>_compared_to_type=None</em><span class="sig-paren">)</span><a class="headerlink" href="#db_repository.versions.001_migration.bindparam" title="Permalink to this definition">¶</a></dt>
<dd><p>Produce a &#8220;bound expression&#8221;.</p>
<p>The return value is an instance of <code class="xref py py-class docutils literal"><span class="pre">BindParameter</span></code>; this
is a <code class="xref py py-class docutils literal"><span class="pre">ColumnElement</span></code> subclass which represents a so-called
&#8220;placeholder&#8221; value in a SQL expression, the value of which is
supplied at the point at which the statement in executed against a
database connection.</p>
<p>In SQLAlchemy, the <a class="reference internal" href="#db_repository.versions.001_migration.bindparam" title="db_repository.versions.001_migration.bindparam"><code class="xref py py-func docutils literal"><span class="pre">bindparam()</span></code></a> construct has
the ability to carry along the actual value that will be ultimately
used at expression time.  In this way, it serves not just as
a &#8220;placeholder&#8221; for eventual population, but also as a means of
representing so-called &#8220;unsafe&#8221; values which should not be rendered
directly in a SQL statement, but rather should be passed along
to the <span class="xref std std-term">DBAPI</span> as values which need to be correctly escaped
and potentially handled for type-safety.</p>
<p>When using <a class="reference internal" href="#db_repository.versions.001_migration.bindparam" title="db_repository.versions.001_migration.bindparam"><code class="xref py py-func docutils literal"><span class="pre">bindparam()</span></code></a> explicitly, the use case is typically
one of traditional deferment of parameters; the <a class="reference internal" href="#db_repository.versions.001_migration.bindparam" title="db_repository.versions.001_migration.bindparam"><code class="xref py py-func docutils literal"><span class="pre">bindparam()</span></code></a>
construct accepts a name which can then be referred to at execution
time:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">bindparam</span>

<span class="n">stmt</span> <span class="o">=</span> <span class="n">select</span><span class="p">([</span><span class="n">users_table</span><span class="p">])</span><span class="o">.</span>\
            <span class="n">where</span><span class="p">(</span><span class="n">users_table</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="n">bindparam</span><span class="p">(</span><span class="s">&#39;username&#39;</span><span class="p">))</span>
</pre></div>
</div>
<p>The above statement, when rendered, will produce SQL similar to:</p>
<div class="highlight-python"><div class="highlight"><pre>SELECT id, name FROM user WHERE name = :username
</pre></div>
</div>
<p>In order to populate the value of <code class="docutils literal"><span class="pre">:username</span></code> above, the value
would typically be applied at execution time to a method
like <code class="xref py py-meth docutils literal"><span class="pre">Connection.execute()</span></code>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">result</span> <span class="o">=</span> <span class="n">connection</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">stmt</span><span class="p">,</span> <span class="n">username</span><span class="o">=</span><span class="s">&#39;wendy&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Explicit use of <a class="reference internal" href="#db_repository.versions.001_migration.bindparam" title="db_repository.versions.001_migration.bindparam"><code class="xref py py-func docutils literal"><span class="pre">bindparam()</span></code></a> is also common when producing
UPDATE or DELETE statements that are to be invoked multiple times,
where the WHERE criterion of the statement is to change on each
invocation, such as:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">stmt</span> <span class="o">=</span> <span class="p">(</span><span class="n">users_table</span><span class="o">.</span><span class="n">update</span><span class="p">()</span><span class="o">.</span>
        <span class="n">where</span><span class="p">(</span><span class="n">user_table</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="n">bindparam</span><span class="p">(</span><span class="s">&#39;username&#39;</span><span class="p">))</span><span class="o">.</span>
        <span class="n">values</span><span class="p">(</span><span class="n">fullname</span><span class="o">=</span><span class="n">bindparam</span><span class="p">(</span><span class="s">&#39;fullname&#39;</span><span class="p">))</span>
        <span class="p">)</span>

<span class="n">connection</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span>
    <span class="n">stmt</span><span class="p">,</span> <span class="p">[{</span><span class="s">&quot;username&quot;</span><span class="p">:</span> <span class="s">&quot;wendy&quot;</span><span class="p">,</span> <span class="s">&quot;fullname&quot;</span><span class="p">:</span> <span class="s">&quot;Wendy Smith&quot;</span><span class="p">},</span>
           <span class="p">{</span><span class="s">&quot;username&quot;</span><span class="p">:</span> <span class="s">&quot;jack&quot;</span><span class="p">,</span> <span class="s">&quot;fullname&quot;</span><span class="p">:</span> <span class="s">&quot;Jack Jones&quot;</span><span class="p">},</span>
           <span class="p">]</span>
<span class="p">)</span>
</pre></div>
</div>
<p>SQLAlchemy&#8217;s Core expression system makes wide use of
<a class="reference internal" href="#db_repository.versions.001_migration.bindparam" title="db_repository.versions.001_migration.bindparam"><code class="xref py py-func docutils literal"><span class="pre">bindparam()</span></code></a> in an implicit sense.   It is typical that Python
literal values passed to virtually all SQL expression functions are
coerced into fixed <a class="reference internal" href="#db_repository.versions.001_migration.bindparam" title="db_repository.versions.001_migration.bindparam"><code class="xref py py-func docutils literal"><span class="pre">bindparam()</span></code></a> constructs.  For example, given
a comparison operation such as:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">expr</span> <span class="o">=</span> <span class="n">users_table</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="s">&#39;Wendy&#39;</span>
</pre></div>
</div>
<p>The above expression will produce a <code class="xref py py-class docutils literal"><span class="pre">BinaryExpression</span></code>
construct, where the left side is the <code class="xref py py-class docutils literal"><span class="pre">Column</span></code> object
representing the <code class="docutils literal"><span class="pre">name</span></code> column, and the right side is a
<code class="xref py py-class docutils literal"><span class="pre">BindParameter</span></code> representing the literal value:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">print</span><span class="p">(</span><span class="nb">repr</span><span class="p">(</span><span class="n">expr</span><span class="o">.</span><span class="n">right</span><span class="p">))</span>
<span class="n">BindParameter</span><span class="p">(</span><span class="s">&#39;%(4327771088 name)s&#39;</span><span class="p">,</span> <span class="s">&#39;Wendy&#39;</span><span class="p">,</span> <span class="n">type_</span><span class="o">=</span><span class="n">String</span><span class="p">())</span>
</pre></div>
</div>
<p>The expression above will render SQL such as:</p>
<div class="highlight-python"><div class="highlight"><pre>user.name = :name_1
</pre></div>
</div>
<p>Where the <code class="docutils literal"><span class="pre">:name_1</span></code> parameter name is an anonymous name.  The
actual string <code class="docutils literal"><span class="pre">Wendy</span></code> is not in the rendered string, but is carried
along where it is later used within statement execution.  If we
invoke a statement like the following:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">stmt</span> <span class="o">=</span> <span class="n">select</span><span class="p">([</span><span class="n">users_table</span><span class="p">])</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">users_table</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="s">&#39;Wendy&#39;</span><span class="p">)</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">connection</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">stmt</span><span class="p">)</span>
</pre></div>
</div>
<p>We would see SQL logging output as:</p>
<div class="highlight-python"><div class="highlight"><pre>SELECT &quot;user&quot;.id, &quot;user&quot;.name
FROM &quot;user&quot;
WHERE &quot;user&quot;.name = %(name_1)s
{&#39;name_1&#39;: &#39;Wendy&#39;}
</pre></div>
</div>
<p>Above, we see that <code class="docutils literal"><span class="pre">Wendy</span></code> is passed as a parameter to the database,
while the placeholder <code class="docutils literal"><span class="pre">:name_1</span></code> is rendered in the appropriate form
for the target database, in this case the Postgresql database.</p>
<p>Similarly, <a class="reference internal" href="#db_repository.versions.001_migration.bindparam" title="db_repository.versions.001_migration.bindparam"><code class="xref py py-func docutils literal"><span class="pre">bindparam()</span></code></a> is invoked automatically
when working with <span class="xref std std-term">CRUD</span> statements as far as the &#8220;VALUES&#8221;
portion is concerned.   The <a class="reference internal" href="#db_repository.versions.001_migration.insert" title="db_repository.versions.001_migration.insert"><code class="xref py py-func docutils literal"><span class="pre">insert()</span></code></a> construct produces an
<code class="docutils literal"><span class="pre">INSERT</span></code> expression which will, at statement execution time,
generate bound placeholders based on the arguments passed, as in:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">stmt</span> <span class="o">=</span> <span class="n">users_table</span><span class="o">.</span><span class="n">insert</span><span class="p">()</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">connection</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">stmt</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s">&#39;Wendy&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>The above will produce SQL output as:</p>
<div class="highlight-python"><div class="highlight"><pre>INSERT INTO &quot;user&quot; (name) VALUES (%(name)s)
{&#39;name&#39;: &#39;Wendy&#39;}
</pre></div>
</div>
<p>The <code class="xref py py-class docutils literal"><span class="pre">Insert</span></code> construct, at compilation/execution time,
rendered a single <a class="reference internal" href="#db_repository.versions.001_migration.bindparam" title="db_repository.versions.001_migration.bindparam"><code class="xref py py-func docutils literal"><span class="pre">bindparam()</span></code></a> mirroring the column
name <code class="docutils literal"><span class="pre">name</span></code> as a result of the single <code class="docutils literal"><span class="pre">name</span></code> parameter
we passed to the <code class="xref py py-meth docutils literal"><span class="pre">Connection.execute()</span></code> method.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>key</strong> &#8211; the key (e.g. the name) for this bind param.
Will be used in the generated
SQL statement for dialects that use named parameters.  This
value may be modified when part of a compilation operation,
if other <code class="xref py py-class docutils literal"><span class="pre">BindParameter</span></code> objects exist with the same
key, or if its length is too long and truncation is
required.</li>
<li><strong>value</strong> &#8211; Initial value for this bind param.  Will be used at statement
execution time as the value for this parameter passed to the
DBAPI, if no other value is indicated to the statement execution
method for this particular parameter name.  Defaults to <code class="docutils literal"><span class="pre">None</span></code>.</li>
<li><strong>callable_</strong> &#8211; A callable function that takes the place of &#8220;value&#8221;.  The function
will be called at statement execution time to determine the
ultimate value.   Used for scenarios where the actual bind
value cannot be determined at the point at which the clause
construct is created, but embedded bind values are still desirable.</li>
<li><strong>type_</strong> &#8211; <p>A <code class="xref py py-class docutils literal"><span class="pre">TypeEngine</span></code> class or instance representing an optional
datatype for this <a class="reference internal" href="#db_repository.versions.001_migration.bindparam" title="db_repository.versions.001_migration.bindparam"><code class="xref py py-func docutils literal"><span class="pre">bindparam()</span></code></a>.  If not passed, a type
may be determined automatically for the bind, based on the given
value; for example, trivial Python types such as <code class="docutils literal"><span class="pre">str</span></code>,
<code class="docutils literal"><span class="pre">int</span></code>, <code class="docutils literal"><span class="pre">bool</span></code>
may result in the <code class="xref py py-class docutils literal"><span class="pre">String</span></code>, <code class="xref py py-class docutils literal"><span class="pre">Integer</span></code> or
<code class="xref py py-class docutils literal"><span class="pre">Boolean</span></code> types being autoamtically selected.</p>
<p>The type of a <a class="reference internal" href="#db_repository.versions.001_migration.bindparam" title="db_repository.versions.001_migration.bindparam"><code class="xref py py-func docutils literal"><span class="pre">bindparam()</span></code></a> is significant especially in that
the type will apply pre-processing to the value before it is
passed to the database.  For example, a <a class="reference internal" href="#db_repository.versions.001_migration.bindparam" title="db_repository.versions.001_migration.bindparam"><code class="xref py py-func docutils literal"><span class="pre">bindparam()</span></code></a> which
refers to a datetime value, and is specified as holding the
<code class="xref py py-class docutils literal"><span class="pre">DateTime</span></code> type, may apply conversion needed to the
value (such as stringification on SQLite) before passing the value
to the database.</p>
</li>
<li><strong>unique</strong> &#8211; if True, the key name of this <code class="xref py py-class docutils literal"><span class="pre">BindParameter</span></code> will be
modified if another <code class="xref py py-class docutils literal"><span class="pre">BindParameter</span></code> of the same name
already has been located within the containing
expression.  This flag is used generally by the internals
when producing so-called &#8220;anonymous&#8221; bound expressions, it
isn&#8217;t generally applicable to explicitly-named <a class="reference internal" href="#db_repository.versions.001_migration.bindparam" title="db_repository.versions.001_migration.bindparam"><code class="xref py py-func docutils literal"><span class="pre">bindparam()</span></code></a>
constructs.</li>
<li><strong>required</strong> &#8211; <p>If <code class="docutils literal"><span class="pre">True</span></code>, a value is required at execution time.  If not passed,
it defaults to <code class="docutils literal"><span class="pre">True</span></code> if neither <a href="#id1"><span class="problematic" id="id2">:paramref:`.bindparam.value`</span></a>
or <a href="#id3"><span class="problematic" id="id4">:paramref:`.bindparam.callable`</span></a> were passed.  If either of these
parameters are present, then <a href="#id5"><span class="problematic" id="id6">:paramref:`.bindparam.required`</span></a>
defaults to <code class="docutils literal"><span class="pre">False</span></code>.</p>
<div class="versionchanged">
<p><span class="versionmodified">Changed in version 0.8: </span>If the <code class="docutils literal"><span class="pre">required</span></code> flag is not specified,
it will be set automatically to <code class="docutils literal"><span class="pre">True</span></code> or <code class="docutils literal"><span class="pre">False</span></code> depending
on whether or not the <code class="docutils literal"><span class="pre">value</span></code> or <code class="docutils literal"><span class="pre">callable</span></code> parameters
were specified.</p>
</div>
</li>
<li><strong>quote</strong> &#8211; True if this parameter name requires quoting and is not
currently known as a SQLAlchemy reserved word; this currently
only applies to the Oracle backend, where bound names must
sometimes be quoted.</li>
<li><strong>isoutparam</strong> &#8211; if True, the parameter should be treated like a stored procedure
&#8220;OUT&#8221; parameter.  This applies to backends such as Oracle which
support OUT parameters.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p><span class="xref std std-ref">coretutorial_bind_param</span></p>
<p><span class="xref std std-ref">coretutorial_insert_expressions</span></p>
<p class="last"><code class="xref py py-func docutils literal"><span class="pre">outparam()</span></code></p>
</div>
</dd></dl>

<dl class="function">
<dt id="db_repository.versions.001_migration.case">
<code class="descclassname">db_repository.versions.001_migration.</code><code class="descname">case</code><span class="sig-paren">(</span><em>whens</em>, <em>value=None</em>, <em>else_=None</em><span class="sig-paren">)</span><a class="headerlink" href="#db_repository.versions.001_migration.case" title="Permalink to this definition">¶</a></dt>
<dd><p>Produce a <code class="docutils literal"><span class="pre">CASE</span></code> expression.</p>
<p>The <code class="docutils literal"><span class="pre">CASE</span></code> construct in SQL is a conditional object that
acts somewhat analogously to an &#8220;if/then&#8221; construct in other
languages.  It returns an instance of <code class="xref py py-class docutils literal"><span class="pre">Case</span></code>.</p>
<p><a class="reference internal" href="#db_repository.versions.001_migration.case" title="db_repository.versions.001_migration.case"><code class="xref py py-func docutils literal"><span class="pre">case()</span></code></a> in its usual form is passed a list of &#8220;when&#8221;
constructs, that is, a list of conditions and results as tuples:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">case</span>

<span class="n">stmt</span> <span class="o">=</span> <span class="n">select</span><span class="p">([</span><span class="n">users_table</span><span class="p">])</span><span class="o">.</span>\
            <span class="n">where</span><span class="p">(</span>
                <span class="n">case</span><span class="p">(</span>
                    <span class="p">[</span>
                        <span class="p">(</span><span class="n">users_table</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="s">&#39;wendy&#39;</span><span class="p">,</span> <span class="s">&#39;W&#39;</span><span class="p">),</span>
                        <span class="p">(</span><span class="n">users_table</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="s">&#39;jack&#39;</span><span class="p">,</span> <span class="s">&#39;J&#39;</span><span class="p">)</span>
                    <span class="p">],</span>
                    <span class="n">else_</span><span class="o">=</span><span class="s">&#39;E&#39;</span>
                <span class="p">)</span>
            <span class="p">)</span>
</pre></div>
</div>
<p>The above statement will produce SQL resembling:</p>
<div class="highlight-python"><div class="highlight"><pre>SELECT id, name FROM user
WHERE CASE
    WHEN (name = :name_1) THEN :param_1
    WHEN (name = :name_2) THEN :param_2
    ELSE :param_3
END
</pre></div>
</div>
<p>When simple equality expressions of several values against a single
parent column are needed, <a class="reference internal" href="#db_repository.versions.001_migration.case" title="db_repository.versions.001_migration.case"><code class="xref py py-func docutils literal"><span class="pre">case()</span></code></a> also has a &#8220;shorthand&#8221; format
used via the
<a href="#id7"><span class="problematic" id="id8">:paramref:`.case.value`</span></a> parameter, which is passed a column
expression to be compared.  In this form, the <a href="#id9"><span class="problematic" id="id10">:paramref:`.case.whens`</span></a>
parameter is passed as a dictionary containing expressions to be
compared against keyed to result expressions.  The statement below is
equivalent to the preceding statement:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">stmt</span> <span class="o">=</span> <span class="n">select</span><span class="p">([</span><span class="n">users_table</span><span class="p">])</span><span class="o">.</span>\
            <span class="n">where</span><span class="p">(</span>
                <span class="n">case</span><span class="p">(</span>
                    <span class="p">{</span><span class="s">&quot;wendy&quot;</span><span class="p">:</span> <span class="s">&quot;W&quot;</span><span class="p">,</span> <span class="s">&quot;jack&quot;</span><span class="p">:</span> <span class="s">&quot;J&quot;</span><span class="p">},</span>
                    <span class="n">value</span><span class="o">=</span><span class="n">users_table</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
                    <span class="n">else_</span><span class="o">=</span><span class="s">&#39;E&#39;</span>
                <span class="p">)</span>
            <span class="p">)</span>
</pre></div>
</div>
<p>The values which are accepted as result values in
<a href="#id11"><span class="problematic" id="id12">:paramref:`.case.whens`</span></a> as well as with <a href="#id13"><span class="problematic" id="id14">:paramref:`.case.else_`</span></a> are
coerced from Python literals into <a class="reference internal" href="#db_repository.versions.001_migration.bindparam" title="db_repository.versions.001_migration.bindparam"><code class="xref py py-func docutils literal"><span class="pre">bindparam()</span></code></a> constructs.
SQL expressions, e.g. <code class="xref py py-class docutils literal"><span class="pre">ColumnElement</span></code> constructs, are accepted
as well.  To coerce a literal string expression into a constant
expression rendered inline, use the <code class="xref py py-func docutils literal"><span class="pre">literal_column()</span></code> construct,
as in:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">case</span><span class="p">,</span> <span class="n">literal_column</span>

<span class="n">case</span><span class="p">(</span>
    <span class="p">[</span>
        <span class="p">(</span>
            <span class="n">orderline</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">qty</span> <span class="o">&gt;</span> <span class="mi">100</span><span class="p">,</span>
            <span class="n">literal_column</span><span class="p">(</span><span class="s">&quot;&#39;greaterthan100&#39;&quot;</span><span class="p">)</span>
        <span class="p">),</span>
        <span class="p">(</span>
            <span class="n">orderline</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">qty</span> <span class="o">&gt;</span> <span class="mi">10</span><span class="p">,</span>
            <span class="n">literal_column</span><span class="p">(</span><span class="s">&quot;&#39;greaterthan10&#39;&quot;</span><span class="p">)</span>
        <span class="p">)</span>
    <span class="p">],</span>
    <span class="n">else_</span><span class="o">=</span><span class="n">literal_column</span><span class="p">(</span><span class="s">&quot;&#39;lessthan10&#39;&quot;</span><span class="p">)</span>
<span class="p">)</span>
</pre></div>
</div>
<p>The above will render the given constants without using bound
parameters for the result values (but still for the comparison
values), as in:</p>
<div class="highlight-python"><div class="highlight"><pre>CASE
    WHEN (orderline.qty &gt; :qty_1) THEN &#39;greaterthan100&#39;
    WHEN (orderline.qty &gt; :qty_2) THEN &#39;greaterthan10&#39;
    ELSE &#39;lessthan10&#39;
END
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>whens</strong> &#8211; <p>The criteria to be compared against,
<a href="#id15"><span class="problematic" id="id16">:paramref:`.case.whens`</span></a> accepts two different forms, based on
whether or not <a href="#id17"><span class="problematic" id="id18">:paramref:`.case.value`</span></a> is used.</p>
<p>In the first form, it accepts a list of 2-tuples; each 2-tuple
consists of <code class="docutils literal"><span class="pre">(&lt;sql</span> <span class="pre">expression&gt;,</span> <span class="pre">&lt;value&gt;)</span></code>, where the SQL
expression is a boolean expression and &#8220;value&#8221; is a resulting value,
e.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">case</span><span class="p">([</span>
    <span class="p">(</span><span class="n">users_table</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="s">&#39;wendy&#39;</span><span class="p">,</span> <span class="s">&#39;W&#39;</span><span class="p">),</span>
    <span class="p">(</span><span class="n">users_table</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="s">&#39;jack&#39;</span><span class="p">,</span> <span class="s">&#39;J&#39;</span><span class="p">)</span>
<span class="p">])</span>
</pre></div>
</div>
<p>In the second form, it accepts a Python dictionary of comparison
values mapped to a resulting value; this form requires
<a href="#id19"><span class="problematic" id="id20">:paramref:`.case.value`</span></a> to be present, and values will be compared
using the <code class="docutils literal"><span class="pre">==</span></code> operator, e.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">case</span><span class="p">(</span>
    <span class="p">{</span><span class="s">&quot;wendy&quot;</span><span class="p">:</span> <span class="s">&quot;W&quot;</span><span class="p">,</span> <span class="s">&quot;jack&quot;</span><span class="p">:</span> <span class="s">&quot;J&quot;</span><span class="p">},</span>
    <span class="n">value</span><span class="o">=</span><span class="n">users_table</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">name</span>
<span class="p">)</span>
</pre></div>
</div>
</li>
<li><strong>value</strong> &#8211; An optional SQL expression which will be used as a
fixed &#8220;comparison point&#8221; for candidate values within a dictionary
passed to <a href="#id21"><span class="problematic" id="id22">:paramref:`.case.whens`</span></a>.</li>
<li><strong>else_</strong> &#8211; An optional SQL expression which will be the evaluated
result of the <code class="docutils literal"><span class="pre">CASE</span></code> construct if all expressions within
<a href="#id23"><span class="problematic" id="id24">:paramref:`.case.whens`</span></a> evaluate to false.  When omitted, most
databases will produce a result of NULL if none of the &#8220;when&#8221;
expressions evaluate to true.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="db_repository.versions.001_migration.cast">
<code class="descclassname">db_repository.versions.001_migration.</code><code class="descname">cast</code><span class="sig-paren">(</span><em>expression</em>, <em>type_</em><span class="sig-paren">)</span><a class="headerlink" href="#db_repository.versions.001_migration.cast" title="Permalink to this definition">¶</a></dt>
<dd><p>Produce a <code class="docutils literal"><span class="pre">CAST</span></code> expression.</p>
<p><a class="reference internal" href="#db_repository.versions.001_migration.cast" title="db_repository.versions.001_migration.cast"><code class="xref py py-func docutils literal"><span class="pre">cast()</span></code></a> returns an instance of <code class="xref py py-class docutils literal"><span class="pre">Cast</span></code>.</p>
<p>E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">cast</span><span class="p">,</span> <span class="n">Numeric</span>

<span class="n">stmt</span> <span class="o">=</span> <span class="n">select</span><span class="p">([</span>
            <span class="n">cast</span><span class="p">(</span><span class="n">product_table</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">unit_price</span><span class="p">,</span> <span class="n">Numeric</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">4</span><span class="p">))</span>
        <span class="p">])</span>
</pre></div>
</div>
<p>The above statement will produce SQL resembling:</p>
<div class="highlight-python"><div class="highlight"><pre>SELECT CAST(unit_price AS NUMERIC(10, 4)) FROM product
</pre></div>
</div>
<p>The <a class="reference internal" href="#db_repository.versions.001_migration.cast" title="db_repository.versions.001_migration.cast"><code class="xref py py-func docutils literal"><span class="pre">cast()</span></code></a> function performs two distinct functions when
used.  The first is that it renders the <code class="docutils literal"><span class="pre">CAST</span></code> expression within
the resulting SQL string.  The second is that it associates the given
type (e.g. <code class="xref py py-class docutils literal"><span class="pre">TypeEngine</span></code> class or instance) with the column
expression on the Python side, which means the expression will take
on the expression operator behavior associated with that type,
as well as the bound-value handling and result-row-handling behavior
of the type.</p>
<div class="versionchanged">
<p><span class="versionmodified">Changed in version 0.9.0: </span><a class="reference internal" href="#db_repository.versions.001_migration.cast" title="db_repository.versions.001_migration.cast"><code class="xref py py-func docutils literal"><span class="pre">cast()</span></code></a> now applies the given type
to the expression such that it takes effect on the bound-value,
e.g. the Python-to-database direction, in addition to the
result handling, e.g. database-to-Python, direction.</p>
</div>
<p>An alternative to <a class="reference internal" href="#db_repository.versions.001_migration.cast" title="db_repository.versions.001_migration.cast"><code class="xref py py-func docutils literal"><span class="pre">cast()</span></code></a> is the <code class="xref py py-func docutils literal"><span class="pre">type_coerce()</span></code> function.
This function performs the second task of associating an expression
with a specific type, but does not render the <code class="docutils literal"><span class="pre">CAST</span></code> expression
in SQL.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>expression</strong> &#8211; A SQL expression, such as a <code class="xref py py-class docutils literal"><span class="pre">ColumnElement</span></code>
expression or a Python string which will be coerced into a bound
literal value.</li>
<li><strong>type</strong> &#8211; A <code class="xref py py-class docutils literal"><span class="pre">TypeEngine</span></code> class or instance indicating
the type to which the <code class="docutils literal"><span class="pre">CAST</span></code> should apply.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><code class="xref py py-func docutils literal"><span class="pre">type_coerce()</span></code> - Python-side type coercion without emitting
CAST.</p>
</div>
</dd></dl>

<dl class="function">
<dt id="db_repository.versions.001_migration.delete">
<code class="descclassname">db_repository.versions.001_migration.</code><code class="descname">delete</code><span class="sig-paren">(</span><em>table</em>, <em>whereclause=None</em>, <em>bind=None</em>, <em>returning=None</em>, <em>prefixes=None</em>, <em>**dialect_kw</em><span class="sig-paren">)</span><a class="headerlink" href="#db_repository.versions.001_migration.delete" title="Permalink to this definition">¶</a></dt>
<dd><p>Construct <code class="xref py py-class docutils literal"><span class="pre">Delete</span></code> object.</p>
<p>Similar functionality is available via the
<code class="xref py py-meth docutils literal"><span class="pre">delete()</span></code> method on
<code class="xref py py-class docutils literal"><span class="pre">Table</span></code>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>table</strong> &#8211; The table to delete rows from.</li>
<li><strong>whereclause</strong> &#8211; A <code class="xref py py-class docutils literal"><span class="pre">ClauseElement</span></code> describing the <code class="docutils literal"><span class="pre">WHERE</span></code>
condition of the <code class="docutils literal"><span class="pre">DELETE</span></code> statement. Note that the
<code class="xref py py-meth docutils literal"><span class="pre">where()</span></code> generative method may be used instead.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><span class="xref std std-ref">deletes</span> - SQL Expression Tutorial</p>
</div>
</dd></dl>

<dl class="function">
<dt id="db_repository.versions.001_migration.desc">
<code class="descclassname">db_repository.versions.001_migration.</code><code class="descname">desc</code><span class="sig-paren">(</span><em>column</em><span class="sig-paren">)</span><a class="headerlink" href="#db_repository.versions.001_migration.desc" title="Permalink to this definition">¶</a></dt>
<dd><p>Produce a descending <code class="docutils literal"><span class="pre">ORDER</span> <span class="pre">BY</span></code> clause element.</p>
<p>e.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">desc</span>

<span class="n">stmt</span> <span class="o">=</span> <span class="n">select</span><span class="p">([</span><span class="n">users_table</span><span class="p">])</span><span class="o">.</span><span class="n">order_by</span><span class="p">(</span><span class="n">desc</span><span class="p">(</span><span class="n">users_table</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">name</span><span class="p">))</span>
</pre></div>
</div>
<p>will produce SQL as:</p>
<div class="highlight-python"><div class="highlight"><pre>SELECT id, name FROM user ORDER BY name DESC
</pre></div>
</div>
<p>The <a class="reference internal" href="#db_repository.versions.001_migration.desc" title="db_repository.versions.001_migration.desc"><code class="xref py py-func docutils literal"><span class="pre">desc()</span></code></a> function is a standalone version of the
<code class="xref py py-meth docutils literal"><span class="pre">ColumnElement.desc()</span></code> method available on all SQL expressions,
e.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">stmt</span> <span class="o">=</span> <span class="n">select</span><span class="p">([</span><span class="n">users_table</span><span class="p">])</span><span class="o">.</span><span class="n">order_by</span><span class="p">(</span><span class="n">users_table</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">name</span><span class="o">.</span><span class="n">desc</span><span class="p">())</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>column</strong> &#8211; A <code class="xref py py-class docutils literal"><span class="pre">ColumnElement</span></code> (e.g. scalar SQL expression)
with which to apply the <a class="reference internal" href="#db_repository.versions.001_migration.desc" title="db_repository.versions.001_migration.desc"><code class="xref py py-func docutils literal"><span class="pre">desc()</span></code></a> operation.</td>
</tr>
</tbody>
</table>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p><a class="reference internal" href="#db_repository.versions.001_migration.asc" title="db_repository.versions.001_migration.asc"><code class="xref py py-func docutils literal"><span class="pre">asc()</span></code></a></p>
<p><code class="xref py py-func docutils literal"><span class="pre">nullsfirst()</span></code></p>
<p><code class="xref py py-func docutils literal"><span class="pre">nullslast()</span></code></p>
<p class="last"><code class="xref py py-meth docutils literal"><span class="pre">Select.order_by()</span></code></p>
</div>
</dd></dl>

<dl class="function">
<dt id="db_repository.versions.001_migration.distinct">
<code class="descclassname">db_repository.versions.001_migration.</code><code class="descname">distinct</code><span class="sig-paren">(</span><em>expr</em><span class="sig-paren">)</span><a class="headerlink" href="#db_repository.versions.001_migration.distinct" title="Permalink to this definition">¶</a></dt>
<dd><p>Produce an column-expression-level unary <code class="docutils literal"><span class="pre">DISTINCT</span></code> clause.</p>
<p>This applies the <code class="docutils literal"><span class="pre">DISTINCT</span></code> keyword to an individual column
expression, and is typically contained within an aggregate function,
as in:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">distinct</span><span class="p">,</span> <span class="n">func</span>
<span class="n">stmt</span> <span class="o">=</span> <span class="n">select</span><span class="p">([</span><span class="n">func</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="n">distinct</span><span class="p">(</span><span class="n">users_table</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">name</span><span class="p">))])</span>
</pre></div>
</div>
<p>The above would produce an expression resembling:</p>
<div class="highlight-python"><div class="highlight"><pre>SELECT COUNT(DISTINCT name) FROM user
</pre></div>
</div>
<p>The <a class="reference internal" href="#db_repository.versions.001_migration.distinct" title="db_repository.versions.001_migration.distinct"><code class="xref py py-func docutils literal"><span class="pre">distinct()</span></code></a> function is also available as a column-level
method, e.g. <code class="xref py py-meth docutils literal"><span class="pre">ColumnElement.distinct()</span></code>, as in:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">stmt</span> <span class="o">=</span> <span class="n">select</span><span class="p">([</span><span class="n">func</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="n">users_table</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">name</span><span class="o">.</span><span class="n">distinct</span><span class="p">())])</span>
</pre></div>
</div>
<p>The <a class="reference internal" href="#db_repository.versions.001_migration.distinct" title="db_repository.versions.001_migration.distinct"><code class="xref py py-func docutils literal"><span class="pre">distinct()</span></code></a> operator is different from the
<code class="xref py py-meth docutils literal"><span class="pre">Select.distinct()</span></code> method of <code class="xref py py-class docutils literal"><span class="pre">Select</span></code>,
which produces a <code class="docutils literal"><span class="pre">SELECT</span></code> statement
with <code class="docutils literal"><span class="pre">DISTINCT</span></code> applied to the result set as a whole,
e.g. a <code class="docutils literal"><span class="pre">SELECT</span> <span class="pre">DISTINCT</span></code> expression.  See that method for further
information.</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p><code class="xref py py-meth docutils literal"><span class="pre">ColumnElement.distinct()</span></code></p>
<p><code class="xref py py-meth docutils literal"><span class="pre">Select.distinct()</span></code></p>
<p class="last"><code class="xref py py-data docutils literal"><span class="pre">func</span></code></p>
</div>
</dd></dl>

<dl class="function">
<dt id="db_repository.versions.001_migration.downgrade">
<code class="descclassname">db_repository.versions.001_migration.</code><code class="descname">downgrade</code><span class="sig-paren">(</span><em>migrate_engine</em><span class="sig-paren">)</span><a class="headerlink" href="#db_repository.versions.001_migration.downgrade" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="db_repository.versions.001_migration.except_">
<code class="descclassname">db_repository.versions.001_migration.</code><code class="descname">except_</code><span class="sig-paren">(</span><em>*selects</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#db_repository.versions.001_migration.except_" title="Permalink to this definition">¶</a></dt>
<dd><p>Return an <code class="docutils literal"><span class="pre">EXCEPT</span></code> of multiple selectables.</p>
<p>The returned object is an instance of
<code class="xref py py-class docutils literal"><span class="pre">CompoundSelect</span></code>.</p>
<dl class="docutils">
<dt>*selects</dt>
<dd>a list of <code class="xref py py-class docutils literal"><span class="pre">Select</span></code> instances.</dd>
<dt>**kwargs</dt>
<dd>available keyword arguments are the same as those of
<a class="reference internal" href="#db_repository.versions.001_migration.select" title="db_repository.versions.001_migration.select"><code class="xref py py-func docutils literal"><span class="pre">select()</span></code></a>.</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="db_repository.versions.001_migration.except_all">
<code class="descclassname">db_repository.versions.001_migration.</code><code class="descname">except_all</code><span class="sig-paren">(</span><em>*selects</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#db_repository.versions.001_migration.except_all" title="Permalink to this definition">¶</a></dt>
<dd><p>Return an <code class="docutils literal"><span class="pre">EXCEPT</span> <span class="pre">ALL</span></code> of multiple selectables.</p>
<p>The returned object is an instance of
<code class="xref py py-class docutils literal"><span class="pre">CompoundSelect</span></code>.</p>
<dl class="docutils">
<dt>*selects</dt>
<dd>a list of <code class="xref py py-class docutils literal"><span class="pre">Select</span></code> instances.</dd>
<dt>**kwargs</dt>
<dd>available keyword arguments are the same as those of
<a class="reference internal" href="#db_repository.versions.001_migration.select" title="db_repository.versions.001_migration.select"><code class="xref py py-func docutils literal"><span class="pre">select()</span></code></a>.</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="db_repository.versions.001_migration.exists">
<code class="descclassname">db_repository.versions.001_migration.</code><code class="descname">exists</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#db_repository.versions.001_migration.exists" title="Permalink to this definition">¶</a></dt>
<dd><p>Construct a new <code class="xref py py-class docutils literal"><span class="pre">Exists</span></code> against an existing
<code class="xref py py-class docutils literal"><span class="pre">Select</span></code> object.</p>
<p>Calling styles are of the following forms:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># use on an existing select()</span>
<span class="n">s</span> <span class="o">=</span> <span class="n">select</span><span class="p">([</span><span class="n">table</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">col1</span><span class="p">])</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">table</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">col2</span><span class="o">==</span><span class="mi">5</span><span class="p">)</span>
<span class="n">s</span> <span class="o">=</span> <span class="n">exists</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>

<span class="c"># construct a select() at once</span>
<span class="n">exists</span><span class="p">([</span><span class="s">&#39;*&#39;</span><span class="p">],</span> <span class="o">**</span><span class="n">select_arguments</span><span class="p">)</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">criterion</span><span class="p">)</span>

<span class="c"># columns argument is optional, generates &quot;EXISTS (SELECT *)&quot;</span>
<span class="c"># by default.</span>
<span class="n">exists</span><span class="p">()</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">table</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">col2</span><span class="o">==</span><span class="mi">5</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="db_repository.versions.001_migration.extract">
<code class="descclassname">db_repository.versions.001_migration.</code><code class="descname">extract</code><span class="sig-paren">(</span><em>field</em>, <em>expr</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#db_repository.versions.001_migration.extract" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a <code class="xref py py-class docutils literal"><span class="pre">Extract</span></code> construct.</p>
<p>This is typically available as <a class="reference internal" href="#db_repository.versions.001_migration.extract" title="db_repository.versions.001_migration.extract"><code class="xref py py-func docutils literal"><span class="pre">extract()</span></code></a>
as well as <code class="docutils literal"><span class="pre">func.extract</span></code> from the
<code class="xref py py-data docutils literal"><span class="pre">func</span></code> namespace.</p>
</dd></dl>

<dl class="function">
<dt id="db_repository.versions.001_migration.false">
<code class="descclassname">db_repository.versions.001_migration.</code><code class="descname">false</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#db_repository.versions.001_migration.false" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a constant <code class="xref py py-class docutils literal"><span class="pre">False_</span></code> construct.</p>
<p>E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">false</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="n">select</span><span class="p">([</span><span class="n">t</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">x</span><span class="p">])</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">false</span><span class="p">())</span>
<span class="go">SELECT x FROM t WHERE false</span>
</pre></div>
</div>
<p>A backend which does not support true/false constants will render as
an expression against 1 or 0:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="n">select</span><span class="p">([</span><span class="n">t</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">x</span><span class="p">])</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">false</span><span class="p">())</span>
<span class="go">SELECT x FROM t WHERE 0 = 1</span>
</pre></div>
</div>
<p>The <a class="reference internal" href="#db_repository.versions.001_migration.true" title="db_repository.versions.001_migration.true"><code class="xref py py-func docutils literal"><span class="pre">true()</span></code></a> and <a class="reference internal" href="#db_repository.versions.001_migration.false" title="db_repository.versions.001_migration.false"><code class="xref py py-func docutils literal"><span class="pre">false()</span></code></a> constants also feature
&#8220;short circuit&#8221; operation within an <a class="reference internal" href="#db_repository.versions.001_migration.and_" title="db_repository.versions.001_migration.and_"><code class="xref py py-func docutils literal"><span class="pre">and_()</span></code></a> or <a class="reference internal" href="#db_repository.versions.001_migration.or_" title="db_repository.versions.001_migration.or_"><code class="xref py py-func docutils literal"><span class="pre">or_()</span></code></a>
conjunction:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="n">select</span><span class="p">([</span><span class="n">t</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">x</span><span class="p">])</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">or_</span><span class="p">(</span><span class="n">t</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">x</span> <span class="o">&gt;</span> <span class="mi">5</span><span class="p">,</span> <span class="n">true</span><span class="p">()))</span>
<span class="go">SELECT x FROM t WHERE true</span>

<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="n">select</span><span class="p">([</span><span class="n">t</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">x</span><span class="p">])</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">and_</span><span class="p">(</span><span class="n">t</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">x</span> <span class="o">&gt;</span> <span class="mi">5</span><span class="p">,</span> <span class="n">false</span><span class="p">()))</span>
<span class="go">SELECT x FROM t WHERE false</span>
</pre></div>
</div>
<div class="versionchanged">
<p><span class="versionmodified">Changed in version 0.9: </span><a class="reference internal" href="#db_repository.versions.001_migration.true" title="db_repository.versions.001_migration.true"><code class="xref py py-func docutils literal"><span class="pre">true()</span></code></a> and <a class="reference internal" href="#db_repository.versions.001_migration.false" title="db_repository.versions.001_migration.false"><code class="xref py py-func docutils literal"><span class="pre">false()</span></code></a> feature
better integrated behavior within conjunctions and on dialects
that don&#8217;t support true/false constants.</p>
</div>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="#db_repository.versions.001_migration.true" title="db_repository.versions.001_migration.true"><code class="xref py py-func docutils literal"><span class="pre">true()</span></code></a></p>
</div>
</dd></dl>

<dl class="function">
<dt id="db_repository.versions.001_migration.insert">
<code class="descclassname">db_repository.versions.001_migration.</code><code class="descname">insert</code><span class="sig-paren">(</span><em>table</em>, <em>values=None</em>, <em>inline=False</em>, <em>bind=None</em>, <em>prefixes=None</em>, <em>returning=None</em>, <em>return_defaults=False</em>, <em>**dialect_kw</em><span class="sig-paren">)</span><a class="headerlink" href="#db_repository.versions.001_migration.insert" title="Permalink to this definition">¶</a></dt>
<dd><p>Construct an <code class="xref py py-class docutils literal"><span class="pre">Insert</span></code> object.</p>
<p>Similar functionality is available via the
<code class="xref py py-meth docutils literal"><span class="pre">insert()</span></code> method on
<code class="xref py py-class docutils literal"><span class="pre">Table</span></code>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>table</strong> &#8211; <code class="xref py py-class docutils literal"><span class="pre">TableClause</span></code> which is the subject of the
insert.</li>
<li><strong>values</strong> &#8211; collection of values to be inserted; see
<code class="xref py py-meth docutils literal"><span class="pre">Insert.values()</span></code> for a description of allowed formats here.
Can be omitted entirely; a <code class="xref py py-class docutils literal"><span class="pre">Insert</span></code> construct will also
dynamically render the VALUES clause at execution time based on
the parameters passed to <code class="xref py py-meth docutils literal"><span class="pre">Connection.execute()</span></code>.</li>
<li><strong>inline</strong> &#8211; if True, SQL defaults will be compiled &#8216;inline&#8217; into
the statement and not pre-executed.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>If both <cite>values</cite> and compile-time bind parameters are present, the
compile-time bind parameters override the information specified
within <cite>values</cite> on a per-key basis.</p>
<p>The keys within <cite>values</cite> can be either
<code class="xref py py-class docutils literal"><span class="pre">Column</span></code> objects or their string
identifiers. Each key may reference one of:</p>
<ul class="simple">
<li>a literal data value (i.e. string, number, etc.);</li>
<li>a Column object;</li>
<li>a SELECT statement.</li>
</ul>
<p>If a <code class="docutils literal"><span class="pre">SELECT</span></code> statement is specified which references this
<code class="docutils literal"><span class="pre">INSERT</span></code> statement&#8217;s table, the statement will be correlated
against the <code class="docutils literal"><span class="pre">INSERT</span></code> statement.</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p><span class="xref std std-ref">coretutorial_insert_expressions</span> - SQL Expression Tutorial</p>
<p class="last"><span class="xref std std-ref">inserts_and_updates</span> - SQL Expression Tutorial</p>
</div>
</dd></dl>

<dl class="function">
<dt id="db_repository.versions.001_migration.intersect">
<code class="descclassname">db_repository.versions.001_migration.</code><code class="descname">intersect</code><span class="sig-paren">(</span><em>*selects</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#db_repository.versions.001_migration.intersect" title="Permalink to this definition">¶</a></dt>
<dd><p>Return an <code class="docutils literal"><span class="pre">INTERSECT</span></code> of multiple selectables.</p>
<p>The returned object is an instance of
<code class="xref py py-class docutils literal"><span class="pre">CompoundSelect</span></code>.</p>
<dl class="docutils">
<dt>*selects</dt>
<dd>a list of <code class="xref py py-class docutils literal"><span class="pre">Select</span></code> instances.</dd>
<dt>**kwargs</dt>
<dd>available keyword arguments are the same as those of
<a class="reference internal" href="#db_repository.versions.001_migration.select" title="db_repository.versions.001_migration.select"><code class="xref py py-func docutils literal"><span class="pre">select()</span></code></a>.</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="db_repository.versions.001_migration.intersect_all">
<code class="descclassname">db_repository.versions.001_migration.</code><code class="descname">intersect_all</code><span class="sig-paren">(</span><em>*selects</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#db_repository.versions.001_migration.intersect_all" title="Permalink to this definition">¶</a></dt>
<dd><p>Return an <code class="docutils literal"><span class="pre">INTERSECT</span> <span class="pre">ALL</span></code> of multiple selectables.</p>
<p>The returned object is an instance of
<code class="xref py py-class docutils literal"><span class="pre">CompoundSelect</span></code>.</p>
<dl class="docutils">
<dt>*selects</dt>
<dd>a list of <code class="xref py py-class docutils literal"><span class="pre">Select</span></code> instances.</dd>
<dt>**kwargs</dt>
<dd>available keyword arguments are the same as those of
<a class="reference internal" href="#db_repository.versions.001_migration.select" title="db_repository.versions.001_migration.select"><code class="xref py py-func docutils literal"><span class="pre">select()</span></code></a>.</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="db_repository.versions.001_migration.join">
<code class="descclassname">db_repository.versions.001_migration.</code><code class="descname">join</code><span class="sig-paren">(</span><em>left</em>, <em>right</em>, <em>onclause=None</em>, <em>isouter=False</em><span class="sig-paren">)</span><a class="headerlink" href="#db_repository.versions.001_migration.join" title="Permalink to this definition">¶</a></dt>
<dd><p>Produce a <code class="xref py py-class docutils literal"><span class="pre">Join</span></code> object, given two <code class="xref py py-class docutils literal"><span class="pre">FromClause</span></code>
expressions.</p>
<p>E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">j</span> <span class="o">=</span> <span class="n">join</span><span class="p">(</span><span class="n">user_table</span><span class="p">,</span> <span class="n">address_table</span><span class="p">,</span>
         <span class="n">user_table</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">id</span> <span class="o">==</span> <span class="n">address_table</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">user_id</span><span class="p">)</span>
<span class="n">stmt</span> <span class="o">=</span> <span class="n">select</span><span class="p">([</span><span class="n">user_table</span><span class="p">])</span><span class="o">.</span><span class="n">select_from</span><span class="p">(</span><span class="n">j</span><span class="p">)</span>
</pre></div>
</div>
<p>would emit SQL along the lines of:</p>
<div class="highlight-python"><div class="highlight"><pre>SELECT user.id, user.name FROM user
JOIN address ON user.id = address.user_id
</pre></div>
</div>
<p>Similar functionality is available given any
<code class="xref py py-class docutils literal"><span class="pre">FromClause</span></code> object (e.g. such as a <code class="xref py py-class docutils literal"><span class="pre">Table</span></code>) using
the <code class="xref py py-meth docutils literal"><span class="pre">FromClause.join()</span></code> method.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>left</strong> &#8211; The left side of the join.</li>
<li><strong>right</strong> &#8211; the right side of the join; this is any
<code class="xref py py-class docutils literal"><span class="pre">FromClause</span></code> object such as a <code class="xref py py-class docutils literal"><span class="pre">Table</span></code> object, and
may also be a selectable-compatible object such as an ORM-mapped
class.</li>
<li><strong>onclause</strong> &#8211; a SQL expression representing the ON clause of the
join.  If left at <code class="docutils literal"><span class="pre">None</span></code>, <code class="xref py py-meth docutils literal"><span class="pre">FromClause.join()</span></code> will attempt to
join the two tables based on a foreign key relationship.</li>
<li><strong>isouter</strong> &#8211; if True, render a LEFT OUTER JOIN, instead of JOIN.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p><code class="xref py py-meth docutils literal"><span class="pre">FromClause.join()</span></code> - method form, based on a given left side</p>
<p class="last"><code class="xref py py-class docutils literal"><span class="pre">Join</span></code> - the type of object produced</p>
</div>
</dd></dl>

<dl class="function">
<dt id="db_repository.versions.001_migration.null">
<code class="descclassname">db_repository.versions.001_migration.</code><code class="descname">null</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#db_repository.versions.001_migration.null" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a constant <code class="xref py py-class docutils literal"><span class="pre">Null</span></code> construct.</p>
</dd></dl>

<dl class="function">
<dt id="db_repository.versions.001_migration.or_">
<code class="descclassname">db_repository.versions.001_migration.</code><code class="descname">or_</code><span class="sig-paren">(</span><em>*clauses</em><span class="sig-paren">)</span><a class="headerlink" href="#db_repository.versions.001_migration.or_" title="Permalink to this definition">¶</a></dt>
<dd><p>Produce a conjunction of expressions joined by <code class="docutils literal"><span class="pre">OR</span></code>.</p>
<p>E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">or_</span>

<span class="n">stmt</span> <span class="o">=</span> <span class="n">select</span><span class="p">([</span><span class="n">users_table</span><span class="p">])</span><span class="o">.</span><span class="n">where</span><span class="p">(</span>
                <span class="n">or_</span><span class="p">(</span>
                    <span class="n">users_table</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="s">&#39;wendy&#39;</span><span class="p">,</span>
                    <span class="n">users_table</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="s">&#39;jack&#39;</span>
                <span class="p">)</span>
            <span class="p">)</span>
</pre></div>
</div>
<p>The <a class="reference internal" href="#db_repository.versions.001_migration.or_" title="db_repository.versions.001_migration.or_"><code class="xref py py-func docutils literal"><span class="pre">or_()</span></code></a> conjunction is also available using the
Python <code class="docutils literal"><span class="pre">|</span></code> operator (though note that compound expressions
need to be parenthesized in order to function with Python
operator precedence behavior):</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">stmt</span> <span class="o">=</span> <span class="n">select</span><span class="p">([</span><span class="n">users_table</span><span class="p">])</span><span class="o">.</span><span class="n">where</span><span class="p">(</span>
                <span class="p">(</span><span class="n">users_table</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="s">&#39;wendy&#39;</span><span class="p">)</span> <span class="o">|</span>
                <span class="p">(</span><span class="n">users_table</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="s">&#39;jack&#39;</span><span class="p">)</span>
            <span class="p">)</span>
</pre></div>
</div>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="#db_repository.versions.001_migration.and_" title="db_repository.versions.001_migration.and_"><code class="xref py py-func docutils literal"><span class="pre">and_()</span></code></a></p>
</div>
</dd></dl>

<dl class="function">
<dt id="db_repository.versions.001_migration.outerjoin">
<code class="descclassname">db_repository.versions.001_migration.</code><code class="descname">outerjoin</code><span class="sig-paren">(</span><em>left</em>, <em>right</em>, <em>onclause=None</em><span class="sig-paren">)</span><a class="headerlink" href="#db_repository.versions.001_migration.outerjoin" title="Permalink to this definition">¶</a></dt>
<dd><p>Return an <code class="docutils literal"><span class="pre">OUTER</span> <span class="pre">JOIN</span></code> clause element.</p>
<p>The returned object is an instance of <code class="xref py py-class docutils literal"><span class="pre">Join</span></code>.</p>
<p>Similar functionality is also available via the
<code class="xref py py-meth docutils literal"><span class="pre">outerjoin()</span></code> method on any
<code class="xref py py-class docutils literal"><span class="pre">FromClause</span></code>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>left</strong> &#8211; The left side of the join.</li>
<li><strong>right</strong> &#8211; The right side of the join.</li>
<li><strong>onclause</strong> &#8211; Optional criterion for the <code class="docutils literal"><span class="pre">ON</span></code> clause, is
derived from foreign key relationships established between
left and right otherwise.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>To chain joins together, use the <code class="xref py py-meth docutils literal"><span class="pre">FromClause.join()</span></code> or
<code class="xref py py-meth docutils literal"><span class="pre">FromClause.outerjoin()</span></code> methods on the resulting
<code class="xref py py-class docutils literal"><span class="pre">Join</span></code> object.</p>
</dd></dl>

<dl class="function">
<dt id="db_repository.versions.001_migration.over">
<code class="descclassname">db_repository.versions.001_migration.</code><code class="descname">over</code><span class="sig-paren">(</span><em>func</em>, <em>partition_by=None</em>, <em>order_by=None</em><span class="sig-paren">)</span><a class="headerlink" href="#db_repository.versions.001_migration.over" title="Permalink to this definition">¶</a></dt>
<dd><p>Produce an <code class="xref py py-class docutils literal"><span class="pre">Over</span></code> object against a function.</p>
<p>Used against aggregate or so-called &#8220;window&#8221; functions,
for database backends that support window functions.</p>
<p>E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">over</span>
<span class="n">over</span><span class="p">(</span><span class="n">func</span><span class="o">.</span><span class="n">row_number</span><span class="p">(),</span> <span class="n">order_by</span><span class="o">=</span><span class="s">&#39;x&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Would produce &#8220;ROW_NUMBER() OVER(ORDER BY x)&#8221;.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>func</strong> &#8211; a <code class="xref py py-class docutils literal"><span class="pre">FunctionElement</span></code> construct, typically
generated by <code class="xref py py-data docutils literal"><span class="pre">func</span></code>.</li>
<li><strong>partition_by</strong> &#8211; a column element or string, or a list
of such, that will be used as the PARTITION BY clause
of the OVER construct.</li>
<li><strong>order_by</strong> &#8211; a column element or string, or a list
of such, that will be used as the ORDER BY clause
of the OVER construct.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>This function is also available from the <code class="xref py py-data docutils literal"><span class="pre">func</span></code>
construct itself via the <code class="xref py py-meth docutils literal"><span class="pre">FunctionElement.over()</span></code> method.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 0.7.</span></p>
</div>
</dd></dl>

<dl class="function">
<dt id="db_repository.versions.001_migration.select">
<code class="descclassname">db_repository.versions.001_migration.</code><code class="descname">select</code><span class="sig-paren">(</span><em>columns=None</em>, <em>whereclause=None</em>, <em>from_obj=None</em>, <em>distinct=False</em>, <em>having=None</em>, <em>correlate=True</em>, <em>prefixes=None</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#db_repository.versions.001_migration.select" title="Permalink to this definition">¶</a></dt>
<dd><p>Construct a new <code class="xref py py-class docutils literal"><span class="pre">Select</span></code>.</p>
<p>Similar functionality is also available via the
<code class="xref py py-meth docutils literal"><span class="pre">FromClause.select()</span></code> method on any <code class="xref py py-class docutils literal"><span class="pre">FromClause</span></code>.</p>
<p>All arguments which accept <code class="xref py py-class docutils literal"><span class="pre">ClauseElement</span></code> arguments also
accept string arguments, which will be converted as appropriate into
either <a class="reference internal" href="#db_repository.versions.001_migration.text" title="db_repository.versions.001_migration.text"><code class="xref py py-func docutils literal"><span class="pre">text()</span></code></a> or <code class="xref py py-func docutils literal"><span class="pre">literal_column()</span></code> constructs.</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><span class="xref std std-ref">coretutorial_selecting</span> - Core Tutorial description of
<a class="reference internal" href="#db_repository.versions.001_migration.select" title="db_repository.versions.001_migration.select"><code class="xref py py-func docutils literal"><span class="pre">select()</span></code></a>.</p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>columns</strong> &#8211; <p>A list of <code class="xref py py-class docutils literal"><span class="pre">ColumnElement</span></code> or <code class="xref py py-class docutils literal"><span class="pre">FromClause</span></code>
objects which will form the columns clause of the resulting
statement.   For those objects that are instances of
<code class="xref py py-class docutils literal"><span class="pre">FromClause</span></code> (typically <code class="xref py py-class docutils literal"><span class="pre">Table</span></code> or <code class="xref py py-class docutils literal"><span class="pre">Alias</span></code>
objects), the <code class="xref py py-attr docutils literal"><span class="pre">FromClause.c</span></code> collection is extracted
to form a collection of <code class="xref py py-class docutils literal"><span class="pre">ColumnElement</span></code> objects.</p>
<p>This parameter will also accept <code class="xref py py-class docutils literal"><span class="pre">Text</span></code> constructs as
given, as well as ORM-mapped classes.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The <a href="#id25"><span class="problematic" id="id26">:paramref:`.select.columns`</span></a> parameter is not available
in the method form of <a class="reference internal" href="#db_repository.versions.001_migration.select" title="db_repository.versions.001_migration.select"><code class="xref py py-func docutils literal"><span class="pre">select()</span></code></a>, e.g.
<code class="xref py py-meth docutils literal"><span class="pre">FromClause.select()</span></code>.</p>
</div>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p><code class="xref py py-meth docutils literal"><span class="pre">Select.column()</span></code></p>
<p class="last"><code class="xref py py-meth docutils literal"><span class="pre">Select.with_only_columns()</span></code></p>
</div>
</li>
<li><strong>whereclause</strong> &#8211; <p>A <code class="xref py py-class docutils literal"><span class="pre">ClauseElement</span></code> expression which will be used to form the
<code class="docutils literal"><span class="pre">WHERE</span></code> clause.   It is typically preferable to add WHERE
criterion to an existing <code class="xref py py-class docutils literal"><span class="pre">Select</span></code> using method chaining
with <code class="xref py py-meth docutils literal"><span class="pre">Select.where()</span></code>.</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><code class="xref py py-meth docutils literal"><span class="pre">Select.where()</span></code></p>
</div>
</li>
<li><strong>from_obj</strong> &#8211; <p>A list of <code class="xref py py-class docutils literal"><span class="pre">ClauseElement</span></code> objects which will be added to the
<code class="docutils literal"><span class="pre">FROM</span></code> clause of the resulting statement.  This is equivalent
to calling <code class="xref py py-meth docutils literal"><span class="pre">Select.select_from()</span></code> using method chaining on
an existing <code class="xref py py-class docutils literal"><span class="pre">Select</span></code> object.</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><code class="xref py py-meth docutils literal"><span class="pre">Select.select_from()</span></code> - full description of explicit
FROM clause specification.</p>
</div>
</li>
<li><strong>autocommit</strong> &#8211; <p>Deprecated.  Use <code class="docutils literal"><span class="pre">.execution_options(autocommit=&lt;True|False&gt;)</span></code>
to set the autocommit option.</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><code class="xref py py-meth docutils literal"><span class="pre">Executable.execution_options()</span></code></p>
</div>
</li>
<li><strong>bind=None</strong> &#8211; an <code class="xref py py-class docutils literal"><span class="pre">Engine</span></code> or <code class="xref py py-class docutils literal"><span class="pre">Connection</span></code> instance
to which the
resulting <code class="xref py py-class docutils literal"><span class="pre">Select</span></code> object will be bound.  The
<code class="xref py py-class docutils literal"><span class="pre">Select</span></code> object will otherwise automatically bind to
whatever <code class="xref py py-class docutils literal"><span class="pre">Connectable</span></code> instances can be located within
its contained <code class="xref py py-class docutils literal"><span class="pre">ClauseElement</span></code> members.</li>
<li><strong>correlate=True</strong> &#8211; <p>indicates that this <code class="xref py py-class docutils literal"><span class="pre">Select</span></code> object should have its
contained <code class="xref py py-class docutils literal"><span class="pre">FromClause</span></code> elements &#8220;correlated&#8221; to an enclosing
<code class="xref py py-class docutils literal"><span class="pre">Select</span></code> object.  It is typically preferable to specify
correlations on an existing <code class="xref py py-class docutils literal"><span class="pre">Select</span></code> construct using
<code class="xref py py-meth docutils literal"><span class="pre">Select.correlate()</span></code>.</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><code class="xref py py-meth docutils literal"><span class="pre">Select.correlate()</span></code> - full description of correlation.</p>
</div>
</li>
<li><strong>distinct=False</strong> &#8211; <p>when <code class="docutils literal"><span class="pre">True</span></code>, applies a <code class="docutils literal"><span class="pre">DISTINCT</span></code> qualifier to the columns
clause of the resulting statement.</p>
<p>The boolean argument may also be a column expression or list
of column expressions - this is a special calling form which
is understood by the Postgresql dialect to render the
<code class="docutils literal"><span class="pre">DISTINCT</span> <span class="pre">ON</span> <span class="pre">(&lt;columns&gt;)</span></code> syntax.</p>
<p><code class="docutils literal"><span class="pre">distinct</span></code> is also available on an existing <code class="xref py py-class docutils literal"><span class="pre">Select</span></code>
object via the <code class="xref py py-meth docutils literal"><span class="pre">distinct()</span></code> method.</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><code class="xref py py-meth docutils literal"><span class="pre">Select.distinct()</span></code></p>
</div>
</li>
<li><strong>for_update=False</strong> &#8211; <blockquote>
<div>when <code class="docutils literal"><span class="pre">True</span></code>, applies <code class="docutils literal"><span class="pre">FOR</span> <span class="pre">UPDATE</span></code> to the end of the
resulting statement.<div class="deprecated">
<p><span class="versionmodified">Deprecated since version 0.9.0: </span>- use
<code class="xref py py-meth docutils literal"><span class="pre">Select.with_for_update()</span></code> to specify the
structure of the <code class="docutils literal"><span class="pre">FOR</span> <span class="pre">UPDATE</span></code> clause.</p>
</div>
<p><code class="docutils literal"><span class="pre">for_update</span></code> accepts various string values interpreted by
specific backends, including:</p>
<ul>
<li><code class="docutils literal"><span class="pre">&quot;read&quot;</span></code> - on MySQL, translates to <code class="docutils literal"><span class="pre">LOCK</span> <span class="pre">IN</span> <span class="pre">SHARE</span> <span class="pre">MODE</span></code>;
on Postgresql, translates to <code class="docutils literal"><span class="pre">FOR</span> <span class="pre">SHARE</span></code>.</li>
<li><code class="docutils literal"><span class="pre">&quot;nowait&quot;</span></code> - on Postgresql and Oracle, translates to
<code class="docutils literal"><span class="pre">FOR</span> <span class="pre">UPDATE</span> <span class="pre">NOWAIT</span></code>.</li>
<li><code class="docutils literal"><span class="pre">&quot;read_nowait&quot;</span></code> - on Postgresql, translates to
<code class="docutils literal"><span class="pre">FOR</span> <span class="pre">SHARE</span> <span class="pre">NOWAIT</span></code>.</li>
</ul>
</div></blockquote>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><code class="xref py py-meth docutils literal"><span class="pre">Select.with_for_update()</span></code> - improved API for
specifying the <code class="docutils literal"><span class="pre">FOR</span> <span class="pre">UPDATE</span></code> clause.</p>
</div>
</li>
<li><strong>group_by</strong> &#8211; <p>a list of <code class="xref py py-class docutils literal"><span class="pre">ClauseElement</span></code> objects which will comprise the
<code class="docutils literal"><span class="pre">GROUP</span> <span class="pre">BY</span></code> clause of the resulting select.  This parameter
is typically specified more naturally using the
<code class="xref py py-meth docutils literal"><span class="pre">Select.group_by()</span></code> method on an existing <code class="xref py py-class docutils literal"><span class="pre">Select</span></code>.</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><code class="xref py py-meth docutils literal"><span class="pre">Select.group_by()</span></code></p>
</div>
</li>
<li><strong>having</strong> &#8211; <p>a <code class="xref py py-class docutils literal"><span class="pre">ClauseElement</span></code> that will comprise the <code class="docutils literal"><span class="pre">HAVING</span></code> clause
of the resulting select when <code class="docutils literal"><span class="pre">GROUP</span> <span class="pre">BY</span></code> is used.  This parameter
is typically specified more naturally using the
<code class="xref py py-meth docutils literal"><span class="pre">Select.having()</span></code> method on an existing <code class="xref py py-class docutils literal"><span class="pre">Select</span></code>.</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><code class="xref py py-meth docutils literal"><span class="pre">Select.having()</span></code></p>
</div>
</li>
<li><strong>limit=None</strong> &#8211; <p>a numerical value which usually renders as a <code class="docutils literal"><span class="pre">LIMIT</span></code>
expression in the resulting select.  Backends that don&#8217;t
support <code class="docutils literal"><span class="pre">LIMIT</span></code> will attempt to provide similar
functionality.    This parameter is typically specified more naturally
using the <code class="xref py py-meth docutils literal"><span class="pre">Select.limit()</span></code> method on an existing
<code class="xref py py-class docutils literal"><span class="pre">Select</span></code>.</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><code class="xref py py-meth docutils literal"><span class="pre">Select.limit()</span></code></p>
</div>
</li>
<li><strong>offset=None</strong> &#8211; <p>a numeric value which usually renders as an <code class="docutils literal"><span class="pre">OFFSET</span></code>
expression in the resulting select.  Backends that don&#8217;t
support <code class="docutils literal"><span class="pre">OFFSET</span></code> will attempt to provide similar
functionality.  This parameter is typically specified more naturally
using the <code class="xref py py-meth docutils literal"><span class="pre">Select.offset()</span></code> method on an existing
<code class="xref py py-class docutils literal"><span class="pre">Select</span></code>.</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><code class="xref py py-meth docutils literal"><span class="pre">Select.offset()</span></code></p>
</div>
</li>
<li><strong>order_by</strong> &#8211; <p>a scalar or list of <code class="xref py py-class docutils literal"><span class="pre">ClauseElement</span></code> objects which will
comprise the <code class="docutils literal"><span class="pre">ORDER</span> <span class="pre">BY</span></code> clause of the resulting select.
This parameter is typically specified more naturally using the
<code class="xref py py-meth docutils literal"><span class="pre">Select.order_by()</span></code> method on an existing <code class="xref py py-class docutils literal"><span class="pre">Select</span></code>.</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><code class="xref py py-meth docutils literal"><span class="pre">Select.order_by()</span></code></p>
</div>
</li>
<li><strong>use_labels=False</strong> &#8211; <p>when <code class="docutils literal"><span class="pre">True</span></code>, the statement will be generated using labels
for each column in the columns clause, which qualify each
column with its parent table&#8217;s (or aliases) name so that name
conflicts between columns in different tables don&#8217;t occur.
The format of the label is &lt;tablename&gt;_&lt;column&gt;.  The &#8220;c&#8221;
collection of the resulting <code class="xref py py-class docutils literal"><span class="pre">Select</span></code> object will use these
names as well for targeting column members.</p>
<p>This parameter can also be specified on an existing
<code class="xref py py-class docutils literal"><span class="pre">Select</span></code> object using the <code class="xref py py-meth docutils literal"><span class="pre">Select.apply_labels()</span></code>
method.</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><code class="xref py py-meth docutils literal"><span class="pre">Select.apply_labels()</span></code></p>
</div>
</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="db_repository.versions.001_migration.text">
<code class="descclassname">db_repository.versions.001_migration.</code><code class="descname">text</code><span class="sig-paren">(</span><em>text</em>, <em>bind=None</em>, <em>bindparams=None</em>, <em>typemap=None</em>, <em>autocommit=None</em><span class="sig-paren">)</span><a class="headerlink" href="#db_repository.versions.001_migration.text" title="Permalink to this definition">¶</a></dt>
<dd><p>Construct a new <code class="xref py py-class docutils literal"><span class="pre">TextClause</span></code> clause, representing
a textual SQL string directly.</p>
<p>E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">text</span>

<span class="n">t</span> <span class="o">=</span> <span class="n">text</span><span class="p">(</span><span class="s">&quot;SELECT * FROM users&quot;</span><span class="p">)</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">connection</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">t</span><span class="p">)</span>
</pre></div>
</div>
<p>The advantages <a class="reference internal" href="#db_repository.versions.001_migration.text" title="db_repository.versions.001_migration.text"><code class="xref py py-func docutils literal"><span class="pre">text()</span></code></a> provides over a plain string are
backend-neutral support for bind parameters, per-statement
execution options, as well as
bind parameter and result-column typing behavior, allowing
SQLAlchemy type constructs to play a role when executing
a statement that is specified literally.  The construct can also
be provided with a <code class="docutils literal"><span class="pre">.c</span></code> collection of column elements, allowing
it to be embedded in other SQL expression constructs as a subquery.</p>
<p>Bind parameters are specified by name, using the format <code class="docutils literal"><span class="pre">:name</span></code>.
E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">t</span> <span class="o">=</span> <span class="n">text</span><span class="p">(</span><span class="s">&quot;SELECT * FROM users WHERE id=:user_id&quot;</span><span class="p">)</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">connection</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">t</span><span class="p">,</span> <span class="n">user_id</span><span class="o">=</span><span class="mi">12</span><span class="p">)</span>
</pre></div>
</div>
<p>For SQL statements where a colon is required verbatim, as within
an inline string, use a backslash to escape:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">t</span> <span class="o">=</span> <span class="n">text</span><span class="p">(</span><span class="s">&quot;SELECT * FROM users WHERE name=&#39;\:username&#39;&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>The <code class="xref py py-class docutils literal"><span class="pre">TextClause</span></code> construct includes methods which can
provide information about the bound parameters as well as the column
values which would be returned from the textual statement, assuming
it&#8217;s an executable SELECT type of statement.  The
<code class="xref py py-meth docutils literal"><span class="pre">TextClause.bindparams()</span></code> method is used to provide bound
parameter detail, and <code class="xref py py-meth docutils literal"><span class="pre">TextClause.columns()</span></code> method allows
specification of return columns including names and types:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">t</span> <span class="o">=</span> <span class="n">text</span><span class="p">(</span><span class="s">&quot;SELECT * FROM users WHERE id=:user_id&quot;</span><span class="p">)</span><span class="o">.</span>\
        <span class="n">bindparams</span><span class="p">(</span><span class="n">user_id</span><span class="o">=</span><span class="mi">7</span><span class="p">)</span><span class="o">.</span>\
        <span class="n">columns</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="n">Integer</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="n">String</span><span class="p">)</span>

<span class="k">for</span> <span class="nb">id</span><span class="p">,</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">connection</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">t</span><span class="p">):</span>
    <span class="k">print</span><span class="p">(</span><span class="nb">id</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>
</pre></div>
</div>
<p>The <a class="reference internal" href="#db_repository.versions.001_migration.text" title="db_repository.versions.001_migration.text"><code class="xref py py-func docutils literal"><span class="pre">text()</span></code></a> construct is used internally in cases when
a literal string is specified for part of a larger query, such as
when a string is specified to the <code class="xref py py-meth docutils literal"><span class="pre">Select.where()</span></code> method of
<code class="xref py py-class docutils literal"><span class="pre">Select</span></code>.  In those cases, the same
bind parameter syntax is applied:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">s</span> <span class="o">=</span> <span class="n">select</span><span class="p">([</span><span class="n">users</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="n">users</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">name</span><span class="p">])</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="s">&quot;id=:user_id&quot;</span><span class="p">)</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">connection</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="n">user_id</span><span class="o">=</span><span class="mi">12</span><span class="p">)</span>
</pre></div>
</div>
<p>Using <a class="reference internal" href="#db_repository.versions.001_migration.text" title="db_repository.versions.001_migration.text"><code class="xref py py-func docutils literal"><span class="pre">text()</span></code></a> explicitly usually implies the construction
of a full, standalone statement.   As such, SQLAlchemy refers
to it as an <code class="xref py py-class docutils literal"><span class="pre">Executable</span></code> object, and it supports
the <code class="xref py py-meth docutils literal"><span class="pre">Executable.execution_options()</span></code> method.  For example,
a <a class="reference internal" href="#db_repository.versions.001_migration.text" title="db_repository.versions.001_migration.text"><code class="xref py py-func docutils literal"><span class="pre">text()</span></code></a> construct that should be subject to &#8220;autocommit&#8221;
can be set explicitly so using the
<a href="#id27"><span class="problematic" id="id28">:paramref:`.Connection.execution_options.autocommit`</span></a> option:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">t</span> <span class="o">=</span> <span class="n">text</span><span class="p">(</span><span class="s">&quot;EXEC my_procedural_thing()&quot;</span><span class="p">)</span><span class="o">.</span>\
        <span class="n">execution_options</span><span class="p">(</span><span class="n">autocommit</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
</pre></div>
</div>
<p>Note that SQLAlchemy&#8217;s usual &#8220;autocommit&#8221; behavior applies to
<a class="reference internal" href="#db_repository.versions.001_migration.text" title="db_repository.versions.001_migration.text"><code class="xref py py-func docutils literal"><span class="pre">text()</span></code></a> constructs implicitly - that is, statements which begin
with a phrase such as <code class="docutils literal"><span class="pre">INSERT</span></code>, <code class="docutils literal"><span class="pre">UPDATE</span></code>, <code class="docutils literal"><span class="pre">DELETE</span></code>,
or a variety of other phrases specific to certain backends, will
be eligible for autocommit if no transaction is in progress.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>text</strong> &#8211; the text of the SQL statement to be created.  use <code class="docutils literal"><span class="pre">:&lt;param&gt;</span></code>
to specify bind parameters; they will be compiled to their
engine-specific format.</li>
<li><strong>autocommit</strong> &#8211; Deprecated.  Use .execution_options(autocommit=&lt;True|False&gt;)
to set the autocommit option.</li>
<li><strong>bind</strong> &#8211; an optional connection or engine to be used for this text query.</li>
<li><strong>bindparams</strong> &#8211; <p>Deprecated.  A list of <a class="reference internal" href="#db_repository.versions.001_migration.bindparam" title="db_repository.versions.001_migration.bindparam"><code class="xref py py-func docutils literal"><span class="pre">bindparam()</span></code></a> instances used to
provide information about parameters embedded in the statement.
This argument now invokes the <code class="xref py py-meth docutils literal"><span class="pre">TextClause.bindparams()</span></code>
method on the construct before returning it.  E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">stmt</span> <span class="o">=</span> <span class="n">text</span><span class="p">(</span><span class="s">&quot;SELECT * FROM table WHERE id=:id&quot;</span><span class="p">,</span>
          <span class="n">bindparams</span><span class="o">=</span><span class="p">[</span><span class="n">bindparam</span><span class="p">(</span><span class="s">&#39;id&#39;</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">type_</span><span class="o">=</span><span class="n">Integer</span><span class="p">)])</span>
</pre></div>
</div>
<p>Is equivalent to:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">stmt</span> <span class="o">=</span> <span class="n">text</span><span class="p">(</span><span class="s">&quot;SELECT * FROM table WHERE id=:id&quot;</span><span class="p">)</span><span class="o">.</span>\
          <span class="n">bindparams</span><span class="p">(</span><span class="n">bindparam</span><span class="p">(</span><span class="s">&#39;id&#39;</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">type_</span><span class="o">=</span><span class="n">Integer</span><span class="p">))</span>
</pre></div>
</div>
<div class="deprecated">
<p><span class="versionmodified">Deprecated since version 0.9.0: </span>the <code class="xref py py-meth docutils literal"><span class="pre">TextClause.bindparams()</span></code> method
supersedes the <code class="docutils literal"><span class="pre">bindparams</span></code> argument to <a class="reference internal" href="#db_repository.versions.001_migration.text" title="db_repository.versions.001_migration.text"><code class="xref py py-func docutils literal"><span class="pre">text()</span></code></a>.</p>
</div>
</li>
<li><strong>typemap</strong> &#8211; <p>Deprecated.  A dictionary mapping the names of columns
represented in the columns clause of a <code class="docutils literal"><span class="pre">SELECT</span></code> statement
to type objects,
which will be used to perform post-processing on columns within
the result set.  This parameter now invokes the
<code class="xref py py-meth docutils literal"><span class="pre">TextClause.columns()</span></code> method, which returns a
<code class="xref py py-class docutils literal"><span class="pre">TextAsFrom</span></code> construct that gains a <code class="docutils literal"><span class="pre">.c</span></code> collection and
can be embedded in other expressions.  E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">stmt</span> <span class="o">=</span> <span class="n">text</span><span class="p">(</span><span class="s">&quot;SELECT * FROM table&quot;</span><span class="p">,</span>
              <span class="n">typemap</span><span class="o">=</span><span class="p">{</span><span class="s">&#39;id&#39;</span><span class="p">:</span> <span class="n">Integer</span><span class="p">,</span> <span class="s">&#39;name&#39;</span><span class="p">:</span> <span class="n">String</span><span class="p">},</span>
          <span class="p">)</span>
</pre></div>
</div>
<p>Is equivalent to:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">stmt</span> <span class="o">=</span> <span class="n">text</span><span class="p">(</span><span class="s">&quot;SELECT * FROM table&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">columns</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="n">Integer</span><span class="p">,</span>
                                           <span class="n">name</span><span class="o">=</span><span class="n">String</span><span class="p">)</span>
</pre></div>
</div>
<p>Or alternatively:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">sqlalchemy.sql</span> <span class="kn">import</span> <span class="n">column</span>
<span class="n">stmt</span> <span class="o">=</span> <span class="n">text</span><span class="p">(</span><span class="s">&quot;SELECT * FROM table&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">columns</span><span class="p">(</span>
                      <span class="n">column</span><span class="p">(</span><span class="s">&#39;id&#39;</span><span class="p">,</span> <span class="n">Integer</span><span class="p">),</span>
                      <span class="n">column</span><span class="p">(</span><span class="s">&#39;name&#39;</span><span class="p">,</span> <span class="n">String</span><span class="p">)</span>
                  <span class="p">)</span>
</pre></div>
</div>
<div class="deprecated">
<p><span class="versionmodified">Deprecated since version 0.9.0: </span>the <code class="xref py py-meth docutils literal"><span class="pre">TextClause.columns()</span></code> method
supersedes the <code class="docutils literal"><span class="pre">typemap</span></code> argument to <a class="reference internal" href="#db_repository.versions.001_migration.text" title="db_repository.versions.001_migration.text"><code class="xref py py-func docutils literal"><span class="pre">text()</span></code></a>.</p>
</div>
</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="db_repository.versions.001_migration.true">
<code class="descclassname">db_repository.versions.001_migration.</code><code class="descname">true</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#db_repository.versions.001_migration.true" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a constant <code class="xref py py-class docutils literal"><span class="pre">True_</span></code> construct.</p>
<p>E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">true</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="n">select</span><span class="p">([</span><span class="n">t</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">x</span><span class="p">])</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">true</span><span class="p">())</span>
<span class="go">SELECT x FROM t WHERE true</span>
</pre></div>
</div>
<p>A backend which does not support true/false constants will render as
an expression against 1 or 0:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="n">select</span><span class="p">([</span><span class="n">t</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">x</span><span class="p">])</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">true</span><span class="p">())</span>
<span class="go">SELECT x FROM t WHERE 1 = 1</span>
</pre></div>
</div>
<p>The <a class="reference internal" href="#db_repository.versions.001_migration.true" title="db_repository.versions.001_migration.true"><code class="xref py py-func docutils literal"><span class="pre">true()</span></code></a> and <a class="reference internal" href="#db_repository.versions.001_migration.false" title="db_repository.versions.001_migration.false"><code class="xref py py-func docutils literal"><span class="pre">false()</span></code></a> constants also feature
&#8220;short circuit&#8221; operation within an <a class="reference internal" href="#db_repository.versions.001_migration.and_" title="db_repository.versions.001_migration.and_"><code class="xref py py-func docutils literal"><span class="pre">and_()</span></code></a> or <a class="reference internal" href="#db_repository.versions.001_migration.or_" title="db_repository.versions.001_migration.or_"><code class="xref py py-func docutils literal"><span class="pre">or_()</span></code></a>
conjunction:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="n">select</span><span class="p">([</span><span class="n">t</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">x</span><span class="p">])</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">or_</span><span class="p">(</span><span class="n">t</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">x</span> <span class="o">&gt;</span> <span class="mi">5</span><span class="p">,</span> <span class="n">true</span><span class="p">()))</span>
<span class="go">SELECT x FROM t WHERE true</span>

<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="n">select</span><span class="p">([</span><span class="n">t</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">x</span><span class="p">])</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">and_</span><span class="p">(</span><span class="n">t</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">x</span> <span class="o">&gt;</span> <span class="mi">5</span><span class="p">,</span> <span class="n">false</span><span class="p">()))</span>
<span class="go">SELECT x FROM t WHERE false</span>
</pre></div>
</div>
<div class="versionchanged">
<p><span class="versionmodified">Changed in version 0.9: </span><a class="reference internal" href="#db_repository.versions.001_migration.true" title="db_repository.versions.001_migration.true"><code class="xref py py-func docutils literal"><span class="pre">true()</span></code></a> and <a class="reference internal" href="#db_repository.versions.001_migration.false" title="db_repository.versions.001_migration.false"><code class="xref py py-func docutils literal"><span class="pre">false()</span></code></a> feature
better integrated behavior within conjunctions and on dialects
that don&#8217;t support true/false constants.</p>
</div>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="#db_repository.versions.001_migration.false" title="db_repository.versions.001_migration.false"><code class="xref py py-func docutils literal"><span class="pre">false()</span></code></a></p>
</div>
</dd></dl>

<dl class="function">
<dt id="db_repository.versions.001_migration.tuple_">
<code class="descclassname">db_repository.versions.001_migration.</code><code class="descname">tuple_</code><span class="sig-paren">(</span><em>*clauses</em>, <em>**kw</em><span class="sig-paren">)</span><a class="headerlink" href="#db_repository.versions.001_migration.tuple_" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a <code class="xref py py-class docutils literal"><span class="pre">Tuple</span></code>.</p>
<p>Main usage is to produce a composite IN construct:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">tuple_</span>

<span class="n">tuple_</span><span class="p">(</span><span class="n">table</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">col1</span><span class="p">,</span> <span class="n">table</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">col2</span><span class="p">)</span><span class="o">.</span><span class="n">in_</span><span class="p">(</span>
    <span class="p">[(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">12</span><span class="p">),</span> <span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">19</span><span class="p">)]</span>
<span class="p">)</span>
</pre></div>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">The composite IN construct is not supported by all backends,
and is currently known to work on Postgresql and MySQL,
but not SQLite.   Unsupported backends will raise
a subclass of <code class="xref py py-class docutils literal"><span class="pre">DBAPIError</span></code> when such
an expression is invoked.</p>
</div>
</dd></dl>

<dl class="function">
<dt id="db_repository.versions.001_migration.union">
<code class="descclassname">db_repository.versions.001_migration.</code><code class="descname">union</code><span class="sig-paren">(</span><em>*selects</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#db_repository.versions.001_migration.union" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a <code class="docutils literal"><span class="pre">UNION</span></code> of multiple selectables.</p>
<p>The returned object is an instance of
<code class="xref py py-class docutils literal"><span class="pre">CompoundSelect</span></code>.</p>
<p>A similar <a class="reference internal" href="#db_repository.versions.001_migration.union" title="db_repository.versions.001_migration.union"><code class="xref py py-func docutils literal"><span class="pre">union()</span></code></a> method is available on all
<code class="xref py py-class docutils literal"><span class="pre">FromClause</span></code> subclasses.</p>
<dl class="docutils">
<dt>*selects</dt>
<dd>a list of <code class="xref py py-class docutils literal"><span class="pre">Select</span></code> instances.</dd>
<dt>**kwargs</dt>
<dd>available keyword arguments are the same as those of
<a class="reference internal" href="#db_repository.versions.001_migration.select" title="db_repository.versions.001_migration.select"><code class="xref py py-func docutils literal"><span class="pre">select()</span></code></a>.</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="db_repository.versions.001_migration.union_all">
<code class="descclassname">db_repository.versions.001_migration.</code><code class="descname">union_all</code><span class="sig-paren">(</span><em>*selects</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#db_repository.versions.001_migration.union_all" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a <code class="docutils literal"><span class="pre">UNION</span> <span class="pre">ALL</span></code> of multiple selectables.</p>
<p>The returned object is an instance of
<code class="xref py py-class docutils literal"><span class="pre">CompoundSelect</span></code>.</p>
<p>A similar <a class="reference internal" href="#db_repository.versions.001_migration.union_all" title="db_repository.versions.001_migration.union_all"><code class="xref py py-func docutils literal"><span class="pre">union_all()</span></code></a> method is available on all
<code class="xref py py-class docutils literal"><span class="pre">FromClause</span></code> subclasses.</p>
<dl class="docutils">
<dt>*selects</dt>
<dd>a list of <code class="xref py py-class docutils literal"><span class="pre">Select</span></code> instances.</dd>
<dt>**kwargs</dt>
<dd>available keyword arguments are the same as those of
<a class="reference internal" href="#db_repository.versions.001_migration.select" title="db_repository.versions.001_migration.select"><code class="xref py py-func docutils literal"><span class="pre">select()</span></code></a>.</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="db_repository.versions.001_migration.update">
<code class="descclassname">db_repository.versions.001_migration.</code><code class="descname">update</code><span class="sig-paren">(</span><em>table</em>, <em>whereclause=None</em>, <em>values=None</em>, <em>inline=False</em>, <em>bind=None</em>, <em>prefixes=None</em>, <em>returning=None</em>, <em>return_defaults=False</em>, <em>**dialect_kw</em><span class="sig-paren">)</span><a class="headerlink" href="#db_repository.versions.001_migration.update" title="Permalink to this definition">¶</a></dt>
<dd><p>Construct an <code class="xref py py-class docutils literal"><span class="pre">Update</span></code> object.</p>
<p>E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">update</span>

<span class="n">stmt</span> <span class="o">=</span> <span class="n">update</span><span class="p">(</span><span class="n">users</span><span class="p">)</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">users</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">id</span><span class="o">==</span><span class="mi">5</span><span class="p">)</span><span class="o">.</span>\
        <span class="n">values</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&#39;user #5&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Similar functionality is available via the
<code class="xref py py-meth docutils literal"><span class="pre">update()</span></code> method on
<code class="xref py py-class docutils literal"><span class="pre">Table</span></code>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">stmt</span> <span class="o">=</span> <span class="n">users</span><span class="o">.</span><span class="n">update</span><span class="p">()</span><span class="o">.</span>\
            <span class="n">where</span><span class="p">(</span><span class="n">users</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">id</span><span class="o">==</span><span class="mi">5</span><span class="p">)</span><span class="o">.</span>\
            <span class="n">values</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&#39;user #5&#39;</span><span class="p">)</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>table</strong> &#8211; A <code class="xref py py-class docutils literal"><span class="pre">Table</span></code> object representing the database
table to be updated.</li>
<li><strong>whereclause</strong> &#8211; <p>Optional SQL expression describing the <code class="docutils literal"><span class="pre">WHERE</span></code>
condition of the <code class="docutils literal"><span class="pre">UPDATE</span></code> statement.   Modern applications
may prefer to use the generative <code class="xref py py-meth docutils literal"><span class="pre">where()</span></code>
method to specify the <code class="docutils literal"><span class="pre">WHERE</span></code> clause.</p>
<p>The WHERE clause can refer to multiple tables.
For databases which support this, an <code class="docutils literal"><span class="pre">UPDATE</span> <span class="pre">FROM</span></code> clause will
be generated, or on MySQL, a multi-table update.  The statement
will fail on databases that don&#8217;t have support for multi-table
update statements.  A SQL-standard method of referring to
additional tables in the WHERE clause is to use a correlated
subquery:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">users</span><span class="o">.</span><span class="n">update</span><span class="p">()</span><span class="o">.</span><span class="n">values</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&#39;ed&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">where</span><span class="p">(</span>
        <span class="n">users</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">name</span><span class="o">==</span><span class="n">select</span><span class="p">([</span><span class="n">addresses</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">email_address</span><span class="p">])</span><span class="o">.</span>\
                    <span class="n">where</span><span class="p">(</span><span class="n">addresses</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">user_id</span><span class="o">==</span><span class="n">users</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">id</span><span class="p">)</span><span class="o">.</span>\
                    <span class="n">as_scalar</span><span class="p">()</span>
        <span class="p">)</span>
</pre></div>
</div>
<div class="versionchanged">
<p><span class="versionmodified">Changed in version 0.7.4: </span>The WHERE clause can refer to multiple tables.</p>
</div>
</li>
<li><strong>values</strong> &#8211; <p>Optional dictionary which specifies the <code class="docutils literal"><span class="pre">SET</span></code> conditions of the
<code class="docutils literal"><span class="pre">UPDATE</span></code>.  If left as <code class="docutils literal"><span class="pre">None</span></code>, the <code class="docutils literal"><span class="pre">SET</span></code>
conditions are determined from those parameters passed to the
statement during the execution and/or compilation of the
statement.   When compiled standalone without any parameters,
the <code class="docutils literal"><span class="pre">SET</span></code> clause generates for all columns.</p>
<p>Modern applications may prefer to use the generative
<code class="xref py py-meth docutils literal"><span class="pre">Update.values()</span></code> method to set the values of the
UPDATE statement.</p>
</li>
<li><strong>inline</strong> &#8211; if True, no attempt will be made to retrieve the
SQL-generated default values to be provided within the statement;
in particular,
this allows SQL expressions to be rendered &#8216;inline&#8217; within the
statement without the need to pre-execute them beforehand; for
backends that support &#8220;returning&#8221;, this turns off the &#8220;implicit
returning&#8221; feature for the statement.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>If both <code class="docutils literal"><span class="pre">values</span></code> and compile-time bind parameters are present, the
compile-time bind parameters override the information specified
within <code class="docutils literal"><span class="pre">values</span></code> on a per-key basis.</p>
<p>The keys within <code class="docutils literal"><span class="pre">values</span></code> can be either <code class="xref py py-class docutils literal"><span class="pre">Column</span></code>
objects or their string identifiers (specifically the &#8220;key&#8221; of the
<code class="xref py py-class docutils literal"><span class="pre">Column</span></code>, normally but not necessarily equivalent to
its &#8220;name&#8221;).  Normally, the
<code class="xref py py-class docutils literal"><span class="pre">Column</span></code> objects used here are expected to be
part of the target <code class="xref py py-class docutils literal"><span class="pre">Table</span></code> that is the table
to be updated.  However when using MySQL, a multiple-table
UPDATE statement can refer to columns from any of
the tables referred to in the WHERE clause.</p>
<p>The values referred to in <code class="docutils literal"><span class="pre">values</span></code> are typically:</p>
<ul class="simple">
<li>a literal data value (i.e. string, number, etc.)</li>
<li>a SQL expression, such as a related <code class="xref py py-class docutils literal"><span class="pre">Column</span></code>,
a scalar-returning <a class="reference internal" href="#db_repository.versions.001_migration.select" title="db_repository.versions.001_migration.select"><code class="xref py py-func docutils literal"><span class="pre">select()</span></code></a> construct,
etc.</li>
</ul>
<p>When combining <a class="reference internal" href="#db_repository.versions.001_migration.select" title="db_repository.versions.001_migration.select"><code class="xref py py-func docutils literal"><span class="pre">select()</span></code></a> constructs within the values
clause of an <a class="reference internal" href="#db_repository.versions.001_migration.update" title="db_repository.versions.001_migration.update"><code class="xref py py-func docutils literal"><span class="pre">update()</span></code></a> construct,
the subquery represented by the <a class="reference internal" href="#db_repository.versions.001_migration.select" title="db_repository.versions.001_migration.select"><code class="xref py py-func docutils literal"><span class="pre">select()</span></code></a> should be
<em>correlated</em> to the parent table, that is, providing criterion
which links the table inside the subquery to the outer table
being updated:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">users</span><span class="o">.</span><span class="n">update</span><span class="p">()</span><span class="o">.</span><span class="n">values</span><span class="p">(</span>
        <span class="n">name</span><span class="o">=</span><span class="n">select</span><span class="p">([</span><span class="n">addresses</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">email_address</span><span class="p">])</span><span class="o">.</span>\
                <span class="n">where</span><span class="p">(</span><span class="n">addresses</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">user_id</span><span class="o">==</span><span class="n">users</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">id</span><span class="p">)</span><span class="o">.</span>\
                <span class="n">as_scalar</span><span class="p">()</span>
    <span class="p">)</span>
</pre></div>
</div>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><span class="xref std std-ref">inserts_and_updates</span> - SQL Expression
Language Tutorial</p>
</div>
</dd></dl>

<dl class="function">
<dt id="db_repository.versions.001_migration.upgrade">
<code class="descclassname">db_repository.versions.001_migration.</code><code class="descname">upgrade</code><span class="sig-paren">(</span><em>migrate_engine</em><span class="sig-paren">)</span><a class="headerlink" href="#db_repository.versions.001_migration.upgrade" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
<div class="section" id="module-db_repository.versions.002_migration">
<span id="db-repository-versions-002-migration-module"></span><h2>db_repository.versions.002_migration module<a class="headerlink" href="#module-db_repository.versions.002_migration" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="db_repository.versions.002_migration.and_">
<code class="descclassname">db_repository.versions.002_migration.</code><code class="descname">and_</code><span class="sig-paren">(</span><em>*clauses</em><span class="sig-paren">)</span><a class="headerlink" href="#db_repository.versions.002_migration.and_" title="Permalink to this definition">¶</a></dt>
<dd><p>Produce a conjunction of expressions joined by <code class="docutils literal"><span class="pre">AND</span></code>.</p>
<p>E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">and_</span>

<span class="n">stmt</span> <span class="o">=</span> <span class="n">select</span><span class="p">([</span><span class="n">users_table</span><span class="p">])</span><span class="o">.</span><span class="n">where</span><span class="p">(</span>
                <span class="n">and_</span><span class="p">(</span>
                    <span class="n">users_table</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="s">&#39;wendy&#39;</span><span class="p">,</span>
                    <span class="n">users_table</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">enrolled</span> <span class="o">==</span> <span class="bp">True</span>
                <span class="p">)</span>
            <span class="p">)</span>
</pre></div>
</div>
<p>The <a class="reference internal" href="#db_repository.versions.002_migration.and_" title="db_repository.versions.002_migration.and_"><code class="xref py py-func docutils literal"><span class="pre">and_()</span></code></a> conjunction is also available using the
Python <code class="docutils literal"><span class="pre">&amp;</span></code> operator (though note that compound expressions
need to be parenthesized in order to function with Python
operator precedence behavior):</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">stmt</span> <span class="o">=</span> <span class="n">select</span><span class="p">([</span><span class="n">users_table</span><span class="p">])</span><span class="o">.</span><span class="n">where</span><span class="p">(</span>
                <span class="p">(</span><span class="n">users_table</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="s">&#39;wendy&#39;</span><span class="p">)</span> <span class="o">&amp;</span>
                <span class="p">(</span><span class="n">users_table</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">enrolled</span> <span class="o">==</span> <span class="bp">True</span><span class="p">)</span>
            <span class="p">)</span>
</pre></div>
</div>
<p>The <a class="reference internal" href="#db_repository.versions.002_migration.and_" title="db_repository.versions.002_migration.and_"><code class="xref py py-func docutils literal"><span class="pre">and_()</span></code></a> operation is also implicit in some cases;
the <code class="xref py py-meth docutils literal"><span class="pre">Select.where()</span></code> method for example can be invoked multiple
times against a statement, which will have the effect of each
clause being combined using <a class="reference internal" href="#db_repository.versions.002_migration.and_" title="db_repository.versions.002_migration.and_"><code class="xref py py-func docutils literal"><span class="pre">and_()</span></code></a>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">stmt</span> <span class="o">=</span> <span class="n">select</span><span class="p">([</span><span class="n">users_table</span><span class="p">])</span><span class="o">.</span>\
            <span class="n">where</span><span class="p">(</span><span class="n">users_table</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="s">&#39;wendy&#39;</span><span class="p">)</span><span class="o">.</span>\
            <span class="n">where</span><span class="p">(</span><span class="n">users_table</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">enrolled</span> <span class="o">==</span> <span class="bp">True</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="#db_repository.versions.002_migration.or_" title="db_repository.versions.002_migration.or_"><code class="xref py py-func docutils literal"><span class="pre">or_()</span></code></a></p>
</div>
</dd></dl>

<dl class="function">
<dt id="db_repository.versions.002_migration.asc">
<code class="descclassname">db_repository.versions.002_migration.</code><code class="descname">asc</code><span class="sig-paren">(</span><em>column</em><span class="sig-paren">)</span><a class="headerlink" href="#db_repository.versions.002_migration.asc" title="Permalink to this definition">¶</a></dt>
<dd><p>Produce an ascending <code class="docutils literal"><span class="pre">ORDER</span> <span class="pre">BY</span></code> clause element.</p>
<p>e.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">asc</span>
<span class="n">stmt</span> <span class="o">=</span> <span class="n">select</span><span class="p">([</span><span class="n">users_table</span><span class="p">])</span><span class="o">.</span><span class="n">order_by</span><span class="p">(</span><span class="n">asc</span><span class="p">(</span><span class="n">users_table</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">name</span><span class="p">))</span>
</pre></div>
</div>
<p>will produce SQL as:</p>
<div class="highlight-python"><div class="highlight"><pre>SELECT id, name FROM user ORDER BY name ASC
</pre></div>
</div>
<p>The <a class="reference internal" href="#db_repository.versions.002_migration.asc" title="db_repository.versions.002_migration.asc"><code class="xref py py-func docutils literal"><span class="pre">asc()</span></code></a> function is a standalone version of the
<code class="xref py py-meth docutils literal"><span class="pre">ColumnElement.asc()</span></code> method available on all SQL expressions,
e.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">stmt</span> <span class="o">=</span> <span class="n">select</span><span class="p">([</span><span class="n">users_table</span><span class="p">])</span><span class="o">.</span><span class="n">order_by</span><span class="p">(</span><span class="n">users_table</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">name</span><span class="o">.</span><span class="n">asc</span><span class="p">())</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>column</strong> &#8211; A <code class="xref py py-class docutils literal"><span class="pre">ColumnElement</span></code> (e.g. scalar SQL expression)
with which to apply the <a class="reference internal" href="#db_repository.versions.002_migration.asc" title="db_repository.versions.002_migration.asc"><code class="xref py py-func docutils literal"><span class="pre">asc()</span></code></a> operation.</td>
</tr>
</tbody>
</table>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p><a class="reference internal" href="#db_repository.versions.002_migration.desc" title="db_repository.versions.002_migration.desc"><code class="xref py py-func docutils literal"><span class="pre">desc()</span></code></a></p>
<p><code class="xref py py-func docutils literal"><span class="pre">nullsfirst()</span></code></p>
<p><code class="xref py py-func docutils literal"><span class="pre">nullslast()</span></code></p>
<p class="last"><code class="xref py py-meth docutils literal"><span class="pre">Select.order_by()</span></code></p>
</div>
</dd></dl>

<dl class="function">
<dt id="db_repository.versions.002_migration.bindparam">
<code class="descclassname">db_repository.versions.002_migration.</code><code class="descname">bindparam</code><span class="sig-paren">(</span><em>key</em>, <em>value=symbol('NO_ARG')</em>, <em>type_=None</em>, <em>unique=False</em>, <em>required=symbol('NO_ARG')</em>, <em>quote=None</em>, <em>callable_=None</em>, <em>isoutparam=False</em>, <em>_compared_to_operator=None</em>, <em>_compared_to_type=None</em><span class="sig-paren">)</span><a class="headerlink" href="#db_repository.versions.002_migration.bindparam" title="Permalink to this definition">¶</a></dt>
<dd><p>Produce a &#8220;bound expression&#8221;.</p>
<p>The return value is an instance of <code class="xref py py-class docutils literal"><span class="pre">BindParameter</span></code>; this
is a <code class="xref py py-class docutils literal"><span class="pre">ColumnElement</span></code> subclass which represents a so-called
&#8220;placeholder&#8221; value in a SQL expression, the value of which is
supplied at the point at which the statement in executed against a
database connection.</p>
<p>In SQLAlchemy, the <a class="reference internal" href="#db_repository.versions.002_migration.bindparam" title="db_repository.versions.002_migration.bindparam"><code class="xref py py-func docutils literal"><span class="pre">bindparam()</span></code></a> construct has
the ability to carry along the actual value that will be ultimately
used at expression time.  In this way, it serves not just as
a &#8220;placeholder&#8221; for eventual population, but also as a means of
representing so-called &#8220;unsafe&#8221; values which should not be rendered
directly in a SQL statement, but rather should be passed along
to the <span class="xref std std-term">DBAPI</span> as values which need to be correctly escaped
and potentially handled for type-safety.</p>
<p>When using <a class="reference internal" href="#db_repository.versions.002_migration.bindparam" title="db_repository.versions.002_migration.bindparam"><code class="xref py py-func docutils literal"><span class="pre">bindparam()</span></code></a> explicitly, the use case is typically
one of traditional deferment of parameters; the <a class="reference internal" href="#db_repository.versions.002_migration.bindparam" title="db_repository.versions.002_migration.bindparam"><code class="xref py py-func docutils literal"><span class="pre">bindparam()</span></code></a>
construct accepts a name which can then be referred to at execution
time:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">bindparam</span>

<span class="n">stmt</span> <span class="o">=</span> <span class="n">select</span><span class="p">([</span><span class="n">users_table</span><span class="p">])</span><span class="o">.</span>\
            <span class="n">where</span><span class="p">(</span><span class="n">users_table</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="n">bindparam</span><span class="p">(</span><span class="s">&#39;username&#39;</span><span class="p">))</span>
</pre></div>
</div>
<p>The above statement, when rendered, will produce SQL similar to:</p>
<div class="highlight-python"><div class="highlight"><pre>SELECT id, name FROM user WHERE name = :username
</pre></div>
</div>
<p>In order to populate the value of <code class="docutils literal"><span class="pre">:username</span></code> above, the value
would typically be applied at execution time to a method
like <code class="xref py py-meth docutils literal"><span class="pre">Connection.execute()</span></code>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">result</span> <span class="o">=</span> <span class="n">connection</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">stmt</span><span class="p">,</span> <span class="n">username</span><span class="o">=</span><span class="s">&#39;wendy&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Explicit use of <a class="reference internal" href="#db_repository.versions.002_migration.bindparam" title="db_repository.versions.002_migration.bindparam"><code class="xref py py-func docutils literal"><span class="pre">bindparam()</span></code></a> is also common when producing
UPDATE or DELETE statements that are to be invoked multiple times,
where the WHERE criterion of the statement is to change on each
invocation, such as:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">stmt</span> <span class="o">=</span> <span class="p">(</span><span class="n">users_table</span><span class="o">.</span><span class="n">update</span><span class="p">()</span><span class="o">.</span>
        <span class="n">where</span><span class="p">(</span><span class="n">user_table</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="n">bindparam</span><span class="p">(</span><span class="s">&#39;username&#39;</span><span class="p">))</span><span class="o">.</span>
        <span class="n">values</span><span class="p">(</span><span class="n">fullname</span><span class="o">=</span><span class="n">bindparam</span><span class="p">(</span><span class="s">&#39;fullname&#39;</span><span class="p">))</span>
        <span class="p">)</span>

<span class="n">connection</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span>
    <span class="n">stmt</span><span class="p">,</span> <span class="p">[{</span><span class="s">&quot;username&quot;</span><span class="p">:</span> <span class="s">&quot;wendy&quot;</span><span class="p">,</span> <span class="s">&quot;fullname&quot;</span><span class="p">:</span> <span class="s">&quot;Wendy Smith&quot;</span><span class="p">},</span>
           <span class="p">{</span><span class="s">&quot;username&quot;</span><span class="p">:</span> <span class="s">&quot;jack&quot;</span><span class="p">,</span> <span class="s">&quot;fullname&quot;</span><span class="p">:</span> <span class="s">&quot;Jack Jones&quot;</span><span class="p">},</span>
           <span class="p">]</span>
<span class="p">)</span>
</pre></div>
</div>
<p>SQLAlchemy&#8217;s Core expression system makes wide use of
<a class="reference internal" href="#db_repository.versions.002_migration.bindparam" title="db_repository.versions.002_migration.bindparam"><code class="xref py py-func docutils literal"><span class="pre">bindparam()</span></code></a> in an implicit sense.   It is typical that Python
literal values passed to virtually all SQL expression functions are
coerced into fixed <a class="reference internal" href="#db_repository.versions.002_migration.bindparam" title="db_repository.versions.002_migration.bindparam"><code class="xref py py-func docutils literal"><span class="pre">bindparam()</span></code></a> constructs.  For example, given
a comparison operation such as:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">expr</span> <span class="o">=</span> <span class="n">users_table</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="s">&#39;Wendy&#39;</span>
</pre></div>
</div>
<p>The above expression will produce a <code class="xref py py-class docutils literal"><span class="pre">BinaryExpression</span></code>
construct, where the left side is the <code class="xref py py-class docutils literal"><span class="pre">Column</span></code> object
representing the <code class="docutils literal"><span class="pre">name</span></code> column, and the right side is a
<code class="xref py py-class docutils literal"><span class="pre">BindParameter</span></code> representing the literal value:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">print</span><span class="p">(</span><span class="nb">repr</span><span class="p">(</span><span class="n">expr</span><span class="o">.</span><span class="n">right</span><span class="p">))</span>
<span class="n">BindParameter</span><span class="p">(</span><span class="s">&#39;%(4327771088 name)s&#39;</span><span class="p">,</span> <span class="s">&#39;Wendy&#39;</span><span class="p">,</span> <span class="n">type_</span><span class="o">=</span><span class="n">String</span><span class="p">())</span>
</pre></div>
</div>
<p>The expression above will render SQL such as:</p>
<div class="highlight-python"><div class="highlight"><pre>user.name = :name_1
</pre></div>
</div>
<p>Where the <code class="docutils literal"><span class="pre">:name_1</span></code> parameter name is an anonymous name.  The
actual string <code class="docutils literal"><span class="pre">Wendy</span></code> is not in the rendered string, but is carried
along where it is later used within statement execution.  If we
invoke a statement like the following:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">stmt</span> <span class="o">=</span> <span class="n">select</span><span class="p">([</span><span class="n">users_table</span><span class="p">])</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">users_table</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="s">&#39;Wendy&#39;</span><span class="p">)</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">connection</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">stmt</span><span class="p">)</span>
</pre></div>
</div>
<p>We would see SQL logging output as:</p>
<div class="highlight-python"><div class="highlight"><pre>SELECT &quot;user&quot;.id, &quot;user&quot;.name
FROM &quot;user&quot;
WHERE &quot;user&quot;.name = %(name_1)s
{&#39;name_1&#39;: &#39;Wendy&#39;}
</pre></div>
</div>
<p>Above, we see that <code class="docutils literal"><span class="pre">Wendy</span></code> is passed as a parameter to the database,
while the placeholder <code class="docutils literal"><span class="pre">:name_1</span></code> is rendered in the appropriate form
for the target database, in this case the Postgresql database.</p>
<p>Similarly, <a class="reference internal" href="#db_repository.versions.002_migration.bindparam" title="db_repository.versions.002_migration.bindparam"><code class="xref py py-func docutils literal"><span class="pre">bindparam()</span></code></a> is invoked automatically
when working with <span class="xref std std-term">CRUD</span> statements as far as the &#8220;VALUES&#8221;
portion is concerned.   The <a class="reference internal" href="#db_repository.versions.002_migration.insert" title="db_repository.versions.002_migration.insert"><code class="xref py py-func docutils literal"><span class="pre">insert()</span></code></a> construct produces an
<code class="docutils literal"><span class="pre">INSERT</span></code> expression which will, at statement execution time,
generate bound placeholders based on the arguments passed, as in:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">stmt</span> <span class="o">=</span> <span class="n">users_table</span><span class="o">.</span><span class="n">insert</span><span class="p">()</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">connection</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">stmt</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s">&#39;Wendy&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>The above will produce SQL output as:</p>
<div class="highlight-python"><div class="highlight"><pre>INSERT INTO &quot;user&quot; (name) VALUES (%(name)s)
{&#39;name&#39;: &#39;Wendy&#39;}
</pre></div>
</div>
<p>The <code class="xref py py-class docutils literal"><span class="pre">Insert</span></code> construct, at compilation/execution time,
rendered a single <a class="reference internal" href="#db_repository.versions.002_migration.bindparam" title="db_repository.versions.002_migration.bindparam"><code class="xref py py-func docutils literal"><span class="pre">bindparam()</span></code></a> mirroring the column
name <code class="docutils literal"><span class="pre">name</span></code> as a result of the single <code class="docutils literal"><span class="pre">name</span></code> parameter
we passed to the <code class="xref py py-meth docutils literal"><span class="pre">Connection.execute()</span></code> method.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>key</strong> &#8211; the key (e.g. the name) for this bind param.
Will be used in the generated
SQL statement for dialects that use named parameters.  This
value may be modified when part of a compilation operation,
if other <code class="xref py py-class docutils literal"><span class="pre">BindParameter</span></code> objects exist with the same
key, or if its length is too long and truncation is
required.</li>
<li><strong>value</strong> &#8211; Initial value for this bind param.  Will be used at statement
execution time as the value for this parameter passed to the
DBAPI, if no other value is indicated to the statement execution
method for this particular parameter name.  Defaults to <code class="docutils literal"><span class="pre">None</span></code>.</li>
<li><strong>callable_</strong> &#8211; A callable function that takes the place of &#8220;value&#8221;.  The function
will be called at statement execution time to determine the
ultimate value.   Used for scenarios where the actual bind
value cannot be determined at the point at which the clause
construct is created, but embedded bind values are still desirable.</li>
<li><strong>type_</strong> &#8211; <p>A <code class="xref py py-class docutils literal"><span class="pre">TypeEngine</span></code> class or instance representing an optional
datatype for this <a class="reference internal" href="#db_repository.versions.002_migration.bindparam" title="db_repository.versions.002_migration.bindparam"><code class="xref py py-func docutils literal"><span class="pre">bindparam()</span></code></a>.  If not passed, a type
may be determined automatically for the bind, based on the given
value; for example, trivial Python types such as <code class="docutils literal"><span class="pre">str</span></code>,
<code class="docutils literal"><span class="pre">int</span></code>, <code class="docutils literal"><span class="pre">bool</span></code>
may result in the <code class="xref py py-class docutils literal"><span class="pre">String</span></code>, <code class="xref py py-class docutils literal"><span class="pre">Integer</span></code> or
<code class="xref py py-class docutils literal"><span class="pre">Boolean</span></code> types being autoamtically selected.</p>
<p>The type of a <a class="reference internal" href="#db_repository.versions.002_migration.bindparam" title="db_repository.versions.002_migration.bindparam"><code class="xref py py-func docutils literal"><span class="pre">bindparam()</span></code></a> is significant especially in that
the type will apply pre-processing to the value before it is
passed to the database.  For example, a <a class="reference internal" href="#db_repository.versions.002_migration.bindparam" title="db_repository.versions.002_migration.bindparam"><code class="xref py py-func docutils literal"><span class="pre">bindparam()</span></code></a> which
refers to a datetime value, and is specified as holding the
<code class="xref py py-class docutils literal"><span class="pre">DateTime</span></code> type, may apply conversion needed to the
value (such as stringification on SQLite) before passing the value
to the database.</p>
</li>
<li><strong>unique</strong> &#8211; if True, the key name of this <code class="xref py py-class docutils literal"><span class="pre">BindParameter</span></code> will be
modified if another <code class="xref py py-class docutils literal"><span class="pre">BindParameter</span></code> of the same name
already has been located within the containing
expression.  This flag is used generally by the internals
when producing so-called &#8220;anonymous&#8221; bound expressions, it
isn&#8217;t generally applicable to explicitly-named <a class="reference internal" href="#db_repository.versions.002_migration.bindparam" title="db_repository.versions.002_migration.bindparam"><code class="xref py py-func docutils literal"><span class="pre">bindparam()</span></code></a>
constructs.</li>
<li><strong>required</strong> &#8211; <p>If <code class="docutils literal"><span class="pre">True</span></code>, a value is required at execution time.  If not passed,
it defaults to <code class="docutils literal"><span class="pre">True</span></code> if neither <a href="#id29"><span class="problematic" id="id30">:paramref:`.bindparam.value`</span></a>
or <a href="#id31"><span class="problematic" id="id32">:paramref:`.bindparam.callable`</span></a> were passed.  If either of these
parameters are present, then <a href="#id33"><span class="problematic" id="id34">:paramref:`.bindparam.required`</span></a>
defaults to <code class="docutils literal"><span class="pre">False</span></code>.</p>
<div class="versionchanged">
<p><span class="versionmodified">Changed in version 0.8: </span>If the <code class="docutils literal"><span class="pre">required</span></code> flag is not specified,
it will be set automatically to <code class="docutils literal"><span class="pre">True</span></code> or <code class="docutils literal"><span class="pre">False</span></code> depending
on whether or not the <code class="docutils literal"><span class="pre">value</span></code> or <code class="docutils literal"><span class="pre">callable</span></code> parameters
were specified.</p>
</div>
</li>
<li><strong>quote</strong> &#8211; True if this parameter name requires quoting and is not
currently known as a SQLAlchemy reserved word; this currently
only applies to the Oracle backend, where bound names must
sometimes be quoted.</li>
<li><strong>isoutparam</strong> &#8211; if True, the parameter should be treated like a stored procedure
&#8220;OUT&#8221; parameter.  This applies to backends such as Oracle which
support OUT parameters.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p><span class="xref std std-ref">coretutorial_bind_param</span></p>
<p><span class="xref std std-ref">coretutorial_insert_expressions</span></p>
<p class="last"><code class="xref py py-func docutils literal"><span class="pre">outparam()</span></code></p>
</div>
</dd></dl>

<dl class="function">
<dt id="db_repository.versions.002_migration.case">
<code class="descclassname">db_repository.versions.002_migration.</code><code class="descname">case</code><span class="sig-paren">(</span><em>whens</em>, <em>value=None</em>, <em>else_=None</em><span class="sig-paren">)</span><a class="headerlink" href="#db_repository.versions.002_migration.case" title="Permalink to this definition">¶</a></dt>
<dd><p>Produce a <code class="docutils literal"><span class="pre">CASE</span></code> expression.</p>
<p>The <code class="docutils literal"><span class="pre">CASE</span></code> construct in SQL is a conditional object that
acts somewhat analogously to an &#8220;if/then&#8221; construct in other
languages.  It returns an instance of <code class="xref py py-class docutils literal"><span class="pre">Case</span></code>.</p>
<p><a class="reference internal" href="#db_repository.versions.002_migration.case" title="db_repository.versions.002_migration.case"><code class="xref py py-func docutils literal"><span class="pre">case()</span></code></a> in its usual form is passed a list of &#8220;when&#8221;
constructs, that is, a list of conditions and results as tuples:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">case</span>

<span class="n">stmt</span> <span class="o">=</span> <span class="n">select</span><span class="p">([</span><span class="n">users_table</span><span class="p">])</span><span class="o">.</span>\
            <span class="n">where</span><span class="p">(</span>
                <span class="n">case</span><span class="p">(</span>
                    <span class="p">[</span>
                        <span class="p">(</span><span class="n">users_table</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="s">&#39;wendy&#39;</span><span class="p">,</span> <span class="s">&#39;W&#39;</span><span class="p">),</span>
                        <span class="p">(</span><span class="n">users_table</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="s">&#39;jack&#39;</span><span class="p">,</span> <span class="s">&#39;J&#39;</span><span class="p">)</span>
                    <span class="p">],</span>
                    <span class="n">else_</span><span class="o">=</span><span class="s">&#39;E&#39;</span>
                <span class="p">)</span>
            <span class="p">)</span>
</pre></div>
</div>
<p>The above statement will produce SQL resembling:</p>
<div class="highlight-python"><div class="highlight"><pre>SELECT id, name FROM user
WHERE CASE
    WHEN (name = :name_1) THEN :param_1
    WHEN (name = :name_2) THEN :param_2
    ELSE :param_3
END
</pre></div>
</div>
<p>When simple equality expressions of several values against a single
parent column are needed, <a class="reference internal" href="#db_repository.versions.002_migration.case" title="db_repository.versions.002_migration.case"><code class="xref py py-func docutils literal"><span class="pre">case()</span></code></a> also has a &#8220;shorthand&#8221; format
used via the
<a href="#id35"><span class="problematic" id="id36">:paramref:`.case.value`</span></a> parameter, which is passed a column
expression to be compared.  In this form, the <a href="#id37"><span class="problematic" id="id38">:paramref:`.case.whens`</span></a>
parameter is passed as a dictionary containing expressions to be
compared against keyed to result expressions.  The statement below is
equivalent to the preceding statement:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">stmt</span> <span class="o">=</span> <span class="n">select</span><span class="p">([</span><span class="n">users_table</span><span class="p">])</span><span class="o">.</span>\
            <span class="n">where</span><span class="p">(</span>
                <span class="n">case</span><span class="p">(</span>
                    <span class="p">{</span><span class="s">&quot;wendy&quot;</span><span class="p">:</span> <span class="s">&quot;W&quot;</span><span class="p">,</span> <span class="s">&quot;jack&quot;</span><span class="p">:</span> <span class="s">&quot;J&quot;</span><span class="p">},</span>
                    <span class="n">value</span><span class="o">=</span><span class="n">users_table</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
                    <span class="n">else_</span><span class="o">=</span><span class="s">&#39;E&#39;</span>
                <span class="p">)</span>
            <span class="p">)</span>
</pre></div>
</div>
<p>The values which are accepted as result values in
<a href="#id39"><span class="problematic" id="id40">:paramref:`.case.whens`</span></a> as well as with <a href="#id41"><span class="problematic" id="id42">:paramref:`.case.else_`</span></a> are
coerced from Python literals into <a class="reference internal" href="#db_repository.versions.002_migration.bindparam" title="db_repository.versions.002_migration.bindparam"><code class="xref py py-func docutils literal"><span class="pre">bindparam()</span></code></a> constructs.
SQL expressions, e.g. <code class="xref py py-class docutils literal"><span class="pre">ColumnElement</span></code> constructs, are accepted
as well.  To coerce a literal string expression into a constant
expression rendered inline, use the <code class="xref py py-func docutils literal"><span class="pre">literal_column()</span></code> construct,
as in:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">case</span><span class="p">,</span> <span class="n">literal_column</span>

<span class="n">case</span><span class="p">(</span>
    <span class="p">[</span>
        <span class="p">(</span>
            <span class="n">orderline</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">qty</span> <span class="o">&gt;</span> <span class="mi">100</span><span class="p">,</span>
            <span class="n">literal_column</span><span class="p">(</span><span class="s">&quot;&#39;greaterthan100&#39;&quot;</span><span class="p">)</span>
        <span class="p">),</span>
        <span class="p">(</span>
            <span class="n">orderline</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">qty</span> <span class="o">&gt;</span> <span class="mi">10</span><span class="p">,</span>
            <span class="n">literal_column</span><span class="p">(</span><span class="s">&quot;&#39;greaterthan10&#39;&quot;</span><span class="p">)</span>
        <span class="p">)</span>
    <span class="p">],</span>
    <span class="n">else_</span><span class="o">=</span><span class="n">literal_column</span><span class="p">(</span><span class="s">&quot;&#39;lessthan10&#39;&quot;</span><span class="p">)</span>
<span class="p">)</span>
</pre></div>
</div>
<p>The above will render the given constants without using bound
parameters for the result values (but still for the comparison
values), as in:</p>
<div class="highlight-python"><div class="highlight"><pre>CASE
    WHEN (orderline.qty &gt; :qty_1) THEN &#39;greaterthan100&#39;
    WHEN (orderline.qty &gt; :qty_2) THEN &#39;greaterthan10&#39;
    ELSE &#39;lessthan10&#39;
END
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>whens</strong> &#8211; <p>The criteria to be compared against,
<a href="#id43"><span class="problematic" id="id44">:paramref:`.case.whens`</span></a> accepts two different forms, based on
whether or not <a href="#id45"><span class="problematic" id="id46">:paramref:`.case.value`</span></a> is used.</p>
<p>In the first form, it accepts a list of 2-tuples; each 2-tuple
consists of <code class="docutils literal"><span class="pre">(&lt;sql</span> <span class="pre">expression&gt;,</span> <span class="pre">&lt;value&gt;)</span></code>, where the SQL
expression is a boolean expression and &#8220;value&#8221; is a resulting value,
e.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">case</span><span class="p">([</span>
    <span class="p">(</span><span class="n">users_table</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="s">&#39;wendy&#39;</span><span class="p">,</span> <span class="s">&#39;W&#39;</span><span class="p">),</span>
    <span class="p">(</span><span class="n">users_table</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="s">&#39;jack&#39;</span><span class="p">,</span> <span class="s">&#39;J&#39;</span><span class="p">)</span>
<span class="p">])</span>
</pre></div>
</div>
<p>In the second form, it accepts a Python dictionary of comparison
values mapped to a resulting value; this form requires
<a href="#id47"><span class="problematic" id="id48">:paramref:`.case.value`</span></a> to be present, and values will be compared
using the <code class="docutils literal"><span class="pre">==</span></code> operator, e.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">case</span><span class="p">(</span>
    <span class="p">{</span><span class="s">&quot;wendy&quot;</span><span class="p">:</span> <span class="s">&quot;W&quot;</span><span class="p">,</span> <span class="s">&quot;jack&quot;</span><span class="p">:</span> <span class="s">&quot;J&quot;</span><span class="p">},</span>
    <span class="n">value</span><span class="o">=</span><span class="n">users_table</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">name</span>
<span class="p">)</span>
</pre></div>
</div>
</li>
<li><strong>value</strong> &#8211; An optional SQL expression which will be used as a
fixed &#8220;comparison point&#8221; for candidate values within a dictionary
passed to <a href="#id49"><span class="problematic" id="id50">:paramref:`.case.whens`</span></a>.</li>
<li><strong>else_</strong> &#8211; An optional SQL expression which will be the evaluated
result of the <code class="docutils literal"><span class="pre">CASE</span></code> construct if all expressions within
<a href="#id51"><span class="problematic" id="id52">:paramref:`.case.whens`</span></a> evaluate to false.  When omitted, most
databases will produce a result of NULL if none of the &#8220;when&#8221;
expressions evaluate to true.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="db_repository.versions.002_migration.cast">
<code class="descclassname">db_repository.versions.002_migration.</code><code class="descname">cast</code><span class="sig-paren">(</span><em>expression</em>, <em>type_</em><span class="sig-paren">)</span><a class="headerlink" href="#db_repository.versions.002_migration.cast" title="Permalink to this definition">¶</a></dt>
<dd><p>Produce a <code class="docutils literal"><span class="pre">CAST</span></code> expression.</p>
<p><a class="reference internal" href="#db_repository.versions.002_migration.cast" title="db_repository.versions.002_migration.cast"><code class="xref py py-func docutils literal"><span class="pre">cast()</span></code></a> returns an instance of <code class="xref py py-class docutils literal"><span class="pre">Cast</span></code>.</p>
<p>E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">cast</span><span class="p">,</span> <span class="n">Numeric</span>

<span class="n">stmt</span> <span class="o">=</span> <span class="n">select</span><span class="p">([</span>
            <span class="n">cast</span><span class="p">(</span><span class="n">product_table</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">unit_price</span><span class="p">,</span> <span class="n">Numeric</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">4</span><span class="p">))</span>
        <span class="p">])</span>
</pre></div>
</div>
<p>The above statement will produce SQL resembling:</p>
<div class="highlight-python"><div class="highlight"><pre>SELECT CAST(unit_price AS NUMERIC(10, 4)) FROM product
</pre></div>
</div>
<p>The <a class="reference internal" href="#db_repository.versions.002_migration.cast" title="db_repository.versions.002_migration.cast"><code class="xref py py-func docutils literal"><span class="pre">cast()</span></code></a> function performs two distinct functions when
used.  The first is that it renders the <code class="docutils literal"><span class="pre">CAST</span></code> expression within
the resulting SQL string.  The second is that it associates the given
type (e.g. <code class="xref py py-class docutils literal"><span class="pre">TypeEngine</span></code> class or instance) with the column
expression on the Python side, which means the expression will take
on the expression operator behavior associated with that type,
as well as the bound-value handling and result-row-handling behavior
of the type.</p>
<div class="versionchanged">
<p><span class="versionmodified">Changed in version 0.9.0: </span><a class="reference internal" href="#db_repository.versions.002_migration.cast" title="db_repository.versions.002_migration.cast"><code class="xref py py-func docutils literal"><span class="pre">cast()</span></code></a> now applies the given type
to the expression such that it takes effect on the bound-value,
e.g. the Python-to-database direction, in addition to the
result handling, e.g. database-to-Python, direction.</p>
</div>
<p>An alternative to <a class="reference internal" href="#db_repository.versions.002_migration.cast" title="db_repository.versions.002_migration.cast"><code class="xref py py-func docutils literal"><span class="pre">cast()</span></code></a> is the <code class="xref py py-func docutils literal"><span class="pre">type_coerce()</span></code> function.
This function performs the second task of associating an expression
with a specific type, but does not render the <code class="docutils literal"><span class="pre">CAST</span></code> expression
in SQL.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>expression</strong> &#8211; A SQL expression, such as a <code class="xref py py-class docutils literal"><span class="pre">ColumnElement</span></code>
expression or a Python string which will be coerced into a bound
literal value.</li>
<li><strong>type</strong> &#8211; A <code class="xref py py-class docutils literal"><span class="pre">TypeEngine</span></code> class or instance indicating
the type to which the <code class="docutils literal"><span class="pre">CAST</span></code> should apply.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><code class="xref py py-func docutils literal"><span class="pre">type_coerce()</span></code> - Python-side type coercion without emitting
CAST.</p>
</div>
</dd></dl>

<dl class="function">
<dt id="db_repository.versions.002_migration.delete">
<code class="descclassname">db_repository.versions.002_migration.</code><code class="descname">delete</code><span class="sig-paren">(</span><em>table</em>, <em>whereclause=None</em>, <em>bind=None</em>, <em>returning=None</em>, <em>prefixes=None</em>, <em>**dialect_kw</em><span class="sig-paren">)</span><a class="headerlink" href="#db_repository.versions.002_migration.delete" title="Permalink to this definition">¶</a></dt>
<dd><p>Construct <code class="xref py py-class docutils literal"><span class="pre">Delete</span></code> object.</p>
<p>Similar functionality is available via the
<code class="xref py py-meth docutils literal"><span class="pre">delete()</span></code> method on
<code class="xref py py-class docutils literal"><span class="pre">Table</span></code>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>table</strong> &#8211; The table to delete rows from.</li>
<li><strong>whereclause</strong> &#8211; A <code class="xref py py-class docutils literal"><span class="pre">ClauseElement</span></code> describing the <code class="docutils literal"><span class="pre">WHERE</span></code>
condition of the <code class="docutils literal"><span class="pre">DELETE</span></code> statement. Note that the
<code class="xref py py-meth docutils literal"><span class="pre">where()</span></code> generative method may be used instead.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><span class="xref std std-ref">deletes</span> - SQL Expression Tutorial</p>
</div>
</dd></dl>

<dl class="function">
<dt id="db_repository.versions.002_migration.desc">
<code class="descclassname">db_repository.versions.002_migration.</code><code class="descname">desc</code><span class="sig-paren">(</span><em>column</em><span class="sig-paren">)</span><a class="headerlink" href="#db_repository.versions.002_migration.desc" title="Permalink to this definition">¶</a></dt>
<dd><p>Produce a descending <code class="docutils literal"><span class="pre">ORDER</span> <span class="pre">BY</span></code> clause element.</p>
<p>e.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">desc</span>

<span class="n">stmt</span> <span class="o">=</span> <span class="n">select</span><span class="p">([</span><span class="n">users_table</span><span class="p">])</span><span class="o">.</span><span class="n">order_by</span><span class="p">(</span><span class="n">desc</span><span class="p">(</span><span class="n">users_table</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">name</span><span class="p">))</span>
</pre></div>
</div>
<p>will produce SQL as:</p>
<div class="highlight-python"><div class="highlight"><pre>SELECT id, name FROM user ORDER BY name DESC
</pre></div>
</div>
<p>The <a class="reference internal" href="#db_repository.versions.002_migration.desc" title="db_repository.versions.002_migration.desc"><code class="xref py py-func docutils literal"><span class="pre">desc()</span></code></a> function is a standalone version of the
<code class="xref py py-meth docutils literal"><span class="pre">ColumnElement.desc()</span></code> method available on all SQL expressions,
e.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">stmt</span> <span class="o">=</span> <span class="n">select</span><span class="p">([</span><span class="n">users_table</span><span class="p">])</span><span class="o">.</span><span class="n">order_by</span><span class="p">(</span><span class="n">users_table</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">name</span><span class="o">.</span><span class="n">desc</span><span class="p">())</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>column</strong> &#8211; A <code class="xref py py-class docutils literal"><span class="pre">ColumnElement</span></code> (e.g. scalar SQL expression)
with which to apply the <a class="reference internal" href="#db_repository.versions.002_migration.desc" title="db_repository.versions.002_migration.desc"><code class="xref py py-func docutils literal"><span class="pre">desc()</span></code></a> operation.</td>
</tr>
</tbody>
</table>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p><a class="reference internal" href="#db_repository.versions.002_migration.asc" title="db_repository.versions.002_migration.asc"><code class="xref py py-func docutils literal"><span class="pre">asc()</span></code></a></p>
<p><code class="xref py py-func docutils literal"><span class="pre">nullsfirst()</span></code></p>
<p><code class="xref py py-func docutils literal"><span class="pre">nullslast()</span></code></p>
<p class="last"><code class="xref py py-meth docutils literal"><span class="pre">Select.order_by()</span></code></p>
</div>
</dd></dl>

<dl class="function">
<dt id="db_repository.versions.002_migration.distinct">
<code class="descclassname">db_repository.versions.002_migration.</code><code class="descname">distinct</code><span class="sig-paren">(</span><em>expr</em><span class="sig-paren">)</span><a class="headerlink" href="#db_repository.versions.002_migration.distinct" title="Permalink to this definition">¶</a></dt>
<dd><p>Produce an column-expression-level unary <code class="docutils literal"><span class="pre">DISTINCT</span></code> clause.</p>
<p>This applies the <code class="docutils literal"><span class="pre">DISTINCT</span></code> keyword to an individual column
expression, and is typically contained within an aggregate function,
as in:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">distinct</span><span class="p">,</span> <span class="n">func</span>
<span class="n">stmt</span> <span class="o">=</span> <span class="n">select</span><span class="p">([</span><span class="n">func</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="n">distinct</span><span class="p">(</span><span class="n">users_table</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">name</span><span class="p">))])</span>
</pre></div>
</div>
<p>The above would produce an expression resembling:</p>
<div class="highlight-python"><div class="highlight"><pre>SELECT COUNT(DISTINCT name) FROM user
</pre></div>
</div>
<p>The <a class="reference internal" href="#db_repository.versions.002_migration.distinct" title="db_repository.versions.002_migration.distinct"><code class="xref py py-func docutils literal"><span class="pre">distinct()</span></code></a> function is also available as a column-level
method, e.g. <code class="xref py py-meth docutils literal"><span class="pre">ColumnElement.distinct()</span></code>, as in:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">stmt</span> <span class="o">=</span> <span class="n">select</span><span class="p">([</span><span class="n">func</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="n">users_table</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">name</span><span class="o">.</span><span class="n">distinct</span><span class="p">())])</span>
</pre></div>
</div>
<p>The <a class="reference internal" href="#db_repository.versions.002_migration.distinct" title="db_repository.versions.002_migration.distinct"><code class="xref py py-func docutils literal"><span class="pre">distinct()</span></code></a> operator is different from the
<code class="xref py py-meth docutils literal"><span class="pre">Select.distinct()</span></code> method of <code class="xref py py-class docutils literal"><span class="pre">Select</span></code>,
which produces a <code class="docutils literal"><span class="pre">SELECT</span></code> statement
with <code class="docutils literal"><span class="pre">DISTINCT</span></code> applied to the result set as a whole,
e.g. a <code class="docutils literal"><span class="pre">SELECT</span> <span class="pre">DISTINCT</span></code> expression.  See that method for further
information.</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p><code class="xref py py-meth docutils literal"><span class="pre">ColumnElement.distinct()</span></code></p>
<p><code class="xref py py-meth docutils literal"><span class="pre">Select.distinct()</span></code></p>
<p class="last"><code class="xref py py-data docutils literal"><span class="pre">func</span></code></p>
</div>
</dd></dl>

<dl class="function">
<dt id="db_repository.versions.002_migration.downgrade">
<code class="descclassname">db_repository.versions.002_migration.</code><code class="descname">downgrade</code><span class="sig-paren">(</span><em>migrate_engine</em><span class="sig-paren">)</span><a class="headerlink" href="#db_repository.versions.002_migration.downgrade" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="db_repository.versions.002_migration.except_">
<code class="descclassname">db_repository.versions.002_migration.</code><code class="descname">except_</code><span class="sig-paren">(</span><em>*selects</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#db_repository.versions.002_migration.except_" title="Permalink to this definition">¶</a></dt>
<dd><p>Return an <code class="docutils literal"><span class="pre">EXCEPT</span></code> of multiple selectables.</p>
<p>The returned object is an instance of
<code class="xref py py-class docutils literal"><span class="pre">CompoundSelect</span></code>.</p>
<dl class="docutils">
<dt>*selects</dt>
<dd>a list of <code class="xref py py-class docutils literal"><span class="pre">Select</span></code> instances.</dd>
<dt>**kwargs</dt>
<dd>available keyword arguments are the same as those of
<a class="reference internal" href="#db_repository.versions.002_migration.select" title="db_repository.versions.002_migration.select"><code class="xref py py-func docutils literal"><span class="pre">select()</span></code></a>.</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="db_repository.versions.002_migration.except_all">
<code class="descclassname">db_repository.versions.002_migration.</code><code class="descname">except_all</code><span class="sig-paren">(</span><em>*selects</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#db_repository.versions.002_migration.except_all" title="Permalink to this definition">¶</a></dt>
<dd><p>Return an <code class="docutils literal"><span class="pre">EXCEPT</span> <span class="pre">ALL</span></code> of multiple selectables.</p>
<p>The returned object is an instance of
<code class="xref py py-class docutils literal"><span class="pre">CompoundSelect</span></code>.</p>
<dl class="docutils">
<dt>*selects</dt>
<dd>a list of <code class="xref py py-class docutils literal"><span class="pre">Select</span></code> instances.</dd>
<dt>**kwargs</dt>
<dd>available keyword arguments are the same as those of
<a class="reference internal" href="#db_repository.versions.002_migration.select" title="db_repository.versions.002_migration.select"><code class="xref py py-func docutils literal"><span class="pre">select()</span></code></a>.</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="db_repository.versions.002_migration.exists">
<code class="descclassname">db_repository.versions.002_migration.</code><code class="descname">exists</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#db_repository.versions.002_migration.exists" title="Permalink to this definition">¶</a></dt>
<dd><p>Construct a new <code class="xref py py-class docutils literal"><span class="pre">Exists</span></code> against an existing
<code class="xref py py-class docutils literal"><span class="pre">Select</span></code> object.</p>
<p>Calling styles are of the following forms:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># use on an existing select()</span>
<span class="n">s</span> <span class="o">=</span> <span class="n">select</span><span class="p">([</span><span class="n">table</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">col1</span><span class="p">])</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">table</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">col2</span><span class="o">==</span><span class="mi">5</span><span class="p">)</span>
<span class="n">s</span> <span class="o">=</span> <span class="n">exists</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>

<span class="c"># construct a select() at once</span>
<span class="n">exists</span><span class="p">([</span><span class="s">&#39;*&#39;</span><span class="p">],</span> <span class="o">**</span><span class="n">select_arguments</span><span class="p">)</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">criterion</span><span class="p">)</span>

<span class="c"># columns argument is optional, generates &quot;EXISTS (SELECT *)&quot;</span>
<span class="c"># by default.</span>
<span class="n">exists</span><span class="p">()</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">table</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">col2</span><span class="o">==</span><span class="mi">5</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="db_repository.versions.002_migration.extract">
<code class="descclassname">db_repository.versions.002_migration.</code><code class="descname">extract</code><span class="sig-paren">(</span><em>field</em>, <em>expr</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#db_repository.versions.002_migration.extract" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a <code class="xref py py-class docutils literal"><span class="pre">Extract</span></code> construct.</p>
<p>This is typically available as <a class="reference internal" href="#db_repository.versions.002_migration.extract" title="db_repository.versions.002_migration.extract"><code class="xref py py-func docutils literal"><span class="pre">extract()</span></code></a>
as well as <code class="docutils literal"><span class="pre">func.extract</span></code> from the
<code class="xref py py-data docutils literal"><span class="pre">func</span></code> namespace.</p>
</dd></dl>

<dl class="function">
<dt id="db_repository.versions.002_migration.false">
<code class="descclassname">db_repository.versions.002_migration.</code><code class="descname">false</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#db_repository.versions.002_migration.false" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a constant <code class="xref py py-class docutils literal"><span class="pre">False_</span></code> construct.</p>
<p>E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">false</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="n">select</span><span class="p">([</span><span class="n">t</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">x</span><span class="p">])</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">false</span><span class="p">())</span>
<span class="go">SELECT x FROM t WHERE false</span>
</pre></div>
</div>
<p>A backend which does not support true/false constants will render as
an expression against 1 or 0:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="n">select</span><span class="p">([</span><span class="n">t</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">x</span><span class="p">])</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">false</span><span class="p">())</span>
<span class="go">SELECT x FROM t WHERE 0 = 1</span>
</pre></div>
</div>
<p>The <a class="reference internal" href="#db_repository.versions.002_migration.true" title="db_repository.versions.002_migration.true"><code class="xref py py-func docutils literal"><span class="pre">true()</span></code></a> and <a class="reference internal" href="#db_repository.versions.002_migration.false" title="db_repository.versions.002_migration.false"><code class="xref py py-func docutils literal"><span class="pre">false()</span></code></a> constants also feature
&#8220;short circuit&#8221; operation within an <a class="reference internal" href="#db_repository.versions.002_migration.and_" title="db_repository.versions.002_migration.and_"><code class="xref py py-func docutils literal"><span class="pre">and_()</span></code></a> or <a class="reference internal" href="#db_repository.versions.002_migration.or_" title="db_repository.versions.002_migration.or_"><code class="xref py py-func docutils literal"><span class="pre">or_()</span></code></a>
conjunction:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="n">select</span><span class="p">([</span><span class="n">t</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">x</span><span class="p">])</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">or_</span><span class="p">(</span><span class="n">t</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">x</span> <span class="o">&gt;</span> <span class="mi">5</span><span class="p">,</span> <span class="n">true</span><span class="p">()))</span>
<span class="go">SELECT x FROM t WHERE true</span>

<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="n">select</span><span class="p">([</span><span class="n">t</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">x</span><span class="p">])</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">and_</span><span class="p">(</span><span class="n">t</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">x</span> <span class="o">&gt;</span> <span class="mi">5</span><span class="p">,</span> <span class="n">false</span><span class="p">()))</span>
<span class="go">SELECT x FROM t WHERE false</span>
</pre></div>
</div>
<div class="versionchanged">
<p><span class="versionmodified">Changed in version 0.9: </span><a class="reference internal" href="#db_repository.versions.002_migration.true" title="db_repository.versions.002_migration.true"><code class="xref py py-func docutils literal"><span class="pre">true()</span></code></a> and <a class="reference internal" href="#db_repository.versions.002_migration.false" title="db_repository.versions.002_migration.false"><code class="xref py py-func docutils literal"><span class="pre">false()</span></code></a> feature
better integrated behavior within conjunctions and on dialects
that don&#8217;t support true/false constants.</p>
</div>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="#db_repository.versions.002_migration.true" title="db_repository.versions.002_migration.true"><code class="xref py py-func docutils literal"><span class="pre">true()</span></code></a></p>
</div>
</dd></dl>

<dl class="function">
<dt id="db_repository.versions.002_migration.insert">
<code class="descclassname">db_repository.versions.002_migration.</code><code class="descname">insert</code><span class="sig-paren">(</span><em>table</em>, <em>values=None</em>, <em>inline=False</em>, <em>bind=None</em>, <em>prefixes=None</em>, <em>returning=None</em>, <em>return_defaults=False</em>, <em>**dialect_kw</em><span class="sig-paren">)</span><a class="headerlink" href="#db_repository.versions.002_migration.insert" title="Permalink to this definition">¶</a></dt>
<dd><p>Construct an <code class="xref py py-class docutils literal"><span class="pre">Insert</span></code> object.</p>
<p>Similar functionality is available via the
<code class="xref py py-meth docutils literal"><span class="pre">insert()</span></code> method on
<code class="xref py py-class docutils literal"><span class="pre">Table</span></code>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>table</strong> &#8211; <code class="xref py py-class docutils literal"><span class="pre">TableClause</span></code> which is the subject of the
insert.</li>
<li><strong>values</strong> &#8211; collection of values to be inserted; see
<code class="xref py py-meth docutils literal"><span class="pre">Insert.values()</span></code> for a description of allowed formats here.
Can be omitted entirely; a <code class="xref py py-class docutils literal"><span class="pre">Insert</span></code> construct will also
dynamically render the VALUES clause at execution time based on
the parameters passed to <code class="xref py py-meth docutils literal"><span class="pre">Connection.execute()</span></code>.</li>
<li><strong>inline</strong> &#8211; if True, SQL defaults will be compiled &#8216;inline&#8217; into
the statement and not pre-executed.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>If both <cite>values</cite> and compile-time bind parameters are present, the
compile-time bind parameters override the information specified
within <cite>values</cite> on a per-key basis.</p>
<p>The keys within <cite>values</cite> can be either
<code class="xref py py-class docutils literal"><span class="pre">Column</span></code> objects or their string
identifiers. Each key may reference one of:</p>
<ul class="simple">
<li>a literal data value (i.e. string, number, etc.);</li>
<li>a Column object;</li>
<li>a SELECT statement.</li>
</ul>
<p>If a <code class="docutils literal"><span class="pre">SELECT</span></code> statement is specified which references this
<code class="docutils literal"><span class="pre">INSERT</span></code> statement&#8217;s table, the statement will be correlated
against the <code class="docutils literal"><span class="pre">INSERT</span></code> statement.</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p><span class="xref std std-ref">coretutorial_insert_expressions</span> - SQL Expression Tutorial</p>
<p class="last"><span class="xref std std-ref">inserts_and_updates</span> - SQL Expression Tutorial</p>
</div>
</dd></dl>

<dl class="function">
<dt id="db_repository.versions.002_migration.intersect">
<code class="descclassname">db_repository.versions.002_migration.</code><code class="descname">intersect</code><span class="sig-paren">(</span><em>*selects</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#db_repository.versions.002_migration.intersect" title="Permalink to this definition">¶</a></dt>
<dd><p>Return an <code class="docutils literal"><span class="pre">INTERSECT</span></code> of multiple selectables.</p>
<p>The returned object is an instance of
<code class="xref py py-class docutils literal"><span class="pre">CompoundSelect</span></code>.</p>
<dl class="docutils">
<dt>*selects</dt>
<dd>a list of <code class="xref py py-class docutils literal"><span class="pre">Select</span></code> instances.</dd>
<dt>**kwargs</dt>
<dd>available keyword arguments are the same as those of
<a class="reference internal" href="#db_repository.versions.002_migration.select" title="db_repository.versions.002_migration.select"><code class="xref py py-func docutils literal"><span class="pre">select()</span></code></a>.</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="db_repository.versions.002_migration.intersect_all">
<code class="descclassname">db_repository.versions.002_migration.</code><code class="descname">intersect_all</code><span class="sig-paren">(</span><em>*selects</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#db_repository.versions.002_migration.intersect_all" title="Permalink to this definition">¶</a></dt>
<dd><p>Return an <code class="docutils literal"><span class="pre">INTERSECT</span> <span class="pre">ALL</span></code> of multiple selectables.</p>
<p>The returned object is an instance of
<code class="xref py py-class docutils literal"><span class="pre">CompoundSelect</span></code>.</p>
<dl class="docutils">
<dt>*selects</dt>
<dd>a list of <code class="xref py py-class docutils literal"><span class="pre">Select</span></code> instances.</dd>
<dt>**kwargs</dt>
<dd>available keyword arguments are the same as those of
<a class="reference internal" href="#db_repository.versions.002_migration.select" title="db_repository.versions.002_migration.select"><code class="xref py py-func docutils literal"><span class="pre">select()</span></code></a>.</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="db_repository.versions.002_migration.join">
<code class="descclassname">db_repository.versions.002_migration.</code><code class="descname">join</code><span class="sig-paren">(</span><em>left</em>, <em>right</em>, <em>onclause=None</em>, <em>isouter=False</em><span class="sig-paren">)</span><a class="headerlink" href="#db_repository.versions.002_migration.join" title="Permalink to this definition">¶</a></dt>
<dd><p>Produce a <code class="xref py py-class docutils literal"><span class="pre">Join</span></code> object, given two <code class="xref py py-class docutils literal"><span class="pre">FromClause</span></code>
expressions.</p>
<p>E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">j</span> <span class="o">=</span> <span class="n">join</span><span class="p">(</span><span class="n">user_table</span><span class="p">,</span> <span class="n">address_table</span><span class="p">,</span>
         <span class="n">user_table</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">id</span> <span class="o">==</span> <span class="n">address_table</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">user_id</span><span class="p">)</span>
<span class="n">stmt</span> <span class="o">=</span> <span class="n">select</span><span class="p">([</span><span class="n">user_table</span><span class="p">])</span><span class="o">.</span><span class="n">select_from</span><span class="p">(</span><span class="n">j</span><span class="p">)</span>
</pre></div>
</div>
<p>would emit SQL along the lines of:</p>
<div class="highlight-python"><div class="highlight"><pre>SELECT user.id, user.name FROM user
JOIN address ON user.id = address.user_id
</pre></div>
</div>
<p>Similar functionality is available given any
<code class="xref py py-class docutils literal"><span class="pre">FromClause</span></code> object (e.g. such as a <code class="xref py py-class docutils literal"><span class="pre">Table</span></code>) using
the <code class="xref py py-meth docutils literal"><span class="pre">FromClause.join()</span></code> method.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>left</strong> &#8211; The left side of the join.</li>
<li><strong>right</strong> &#8211; the right side of the join; this is any
<code class="xref py py-class docutils literal"><span class="pre">FromClause</span></code> object such as a <code class="xref py py-class docutils literal"><span class="pre">Table</span></code> object, and
may also be a selectable-compatible object such as an ORM-mapped
class.</li>
<li><strong>onclause</strong> &#8211; a SQL expression representing the ON clause of the
join.  If left at <code class="docutils literal"><span class="pre">None</span></code>, <code class="xref py py-meth docutils literal"><span class="pre">FromClause.join()</span></code> will attempt to
join the two tables based on a foreign key relationship.</li>
<li><strong>isouter</strong> &#8211; if True, render a LEFT OUTER JOIN, instead of JOIN.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p><code class="xref py py-meth docutils literal"><span class="pre">FromClause.join()</span></code> - method form, based on a given left side</p>
<p class="last"><code class="xref py py-class docutils literal"><span class="pre">Join</span></code> - the type of object produced</p>
</div>
</dd></dl>

<dl class="function">
<dt id="db_repository.versions.002_migration.null">
<code class="descclassname">db_repository.versions.002_migration.</code><code class="descname">null</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#db_repository.versions.002_migration.null" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a constant <code class="xref py py-class docutils literal"><span class="pre">Null</span></code> construct.</p>
</dd></dl>

<dl class="function">
<dt id="db_repository.versions.002_migration.or_">
<code class="descclassname">db_repository.versions.002_migration.</code><code class="descname">or_</code><span class="sig-paren">(</span><em>*clauses</em><span class="sig-paren">)</span><a class="headerlink" href="#db_repository.versions.002_migration.or_" title="Permalink to this definition">¶</a></dt>
<dd><p>Produce a conjunction of expressions joined by <code class="docutils literal"><span class="pre">OR</span></code>.</p>
<p>E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">or_</span>

<span class="n">stmt</span> <span class="o">=</span> <span class="n">select</span><span class="p">([</span><span class="n">users_table</span><span class="p">])</span><span class="o">.</span><span class="n">where</span><span class="p">(</span>
                <span class="n">or_</span><span class="p">(</span>
                    <span class="n">users_table</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="s">&#39;wendy&#39;</span><span class="p">,</span>
                    <span class="n">users_table</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="s">&#39;jack&#39;</span>
                <span class="p">)</span>
            <span class="p">)</span>
</pre></div>
</div>
<p>The <a class="reference internal" href="#db_repository.versions.002_migration.or_" title="db_repository.versions.002_migration.or_"><code class="xref py py-func docutils literal"><span class="pre">or_()</span></code></a> conjunction is also available using the
Python <code class="docutils literal"><span class="pre">|</span></code> operator (though note that compound expressions
need to be parenthesized in order to function with Python
operator precedence behavior):</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">stmt</span> <span class="o">=</span> <span class="n">select</span><span class="p">([</span><span class="n">users_table</span><span class="p">])</span><span class="o">.</span><span class="n">where</span><span class="p">(</span>
                <span class="p">(</span><span class="n">users_table</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="s">&#39;wendy&#39;</span><span class="p">)</span> <span class="o">|</span>
                <span class="p">(</span><span class="n">users_table</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="s">&#39;jack&#39;</span><span class="p">)</span>
            <span class="p">)</span>
</pre></div>
</div>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="#db_repository.versions.002_migration.and_" title="db_repository.versions.002_migration.and_"><code class="xref py py-func docutils literal"><span class="pre">and_()</span></code></a></p>
</div>
</dd></dl>

<dl class="function">
<dt id="db_repository.versions.002_migration.outerjoin">
<code class="descclassname">db_repository.versions.002_migration.</code><code class="descname">outerjoin</code><span class="sig-paren">(</span><em>left</em>, <em>right</em>, <em>onclause=None</em><span class="sig-paren">)</span><a class="headerlink" href="#db_repository.versions.002_migration.outerjoin" title="Permalink to this definition">¶</a></dt>
<dd><p>Return an <code class="docutils literal"><span class="pre">OUTER</span> <span class="pre">JOIN</span></code> clause element.</p>
<p>The returned object is an instance of <code class="xref py py-class docutils literal"><span class="pre">Join</span></code>.</p>
<p>Similar functionality is also available via the
<code class="xref py py-meth docutils literal"><span class="pre">outerjoin()</span></code> method on any
<code class="xref py py-class docutils literal"><span class="pre">FromClause</span></code>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>left</strong> &#8211; The left side of the join.</li>
<li><strong>right</strong> &#8211; The right side of the join.</li>
<li><strong>onclause</strong> &#8211; Optional criterion for the <code class="docutils literal"><span class="pre">ON</span></code> clause, is
derived from foreign key relationships established between
left and right otherwise.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>To chain joins together, use the <code class="xref py py-meth docutils literal"><span class="pre">FromClause.join()</span></code> or
<code class="xref py py-meth docutils literal"><span class="pre">FromClause.outerjoin()</span></code> methods on the resulting
<code class="xref py py-class docutils literal"><span class="pre">Join</span></code> object.</p>
</dd></dl>

<dl class="function">
<dt id="db_repository.versions.002_migration.over">
<code class="descclassname">db_repository.versions.002_migration.</code><code class="descname">over</code><span class="sig-paren">(</span><em>func</em>, <em>partition_by=None</em>, <em>order_by=None</em><span class="sig-paren">)</span><a class="headerlink" href="#db_repository.versions.002_migration.over" title="Permalink to this definition">¶</a></dt>
<dd><p>Produce an <code class="xref py py-class docutils literal"><span class="pre">Over</span></code> object against a function.</p>
<p>Used against aggregate or so-called &#8220;window&#8221; functions,
for database backends that support window functions.</p>
<p>E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">over</span>
<span class="n">over</span><span class="p">(</span><span class="n">func</span><span class="o">.</span><span class="n">row_number</span><span class="p">(),</span> <span class="n">order_by</span><span class="o">=</span><span class="s">&#39;x&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Would produce &#8220;ROW_NUMBER() OVER(ORDER BY x)&#8221;.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>func</strong> &#8211; a <code class="xref py py-class docutils literal"><span class="pre">FunctionElement</span></code> construct, typically
generated by <code class="xref py py-data docutils literal"><span class="pre">func</span></code>.</li>
<li><strong>partition_by</strong> &#8211; a column element or string, or a list
of such, that will be used as the PARTITION BY clause
of the OVER construct.</li>
<li><strong>order_by</strong> &#8211; a column element or string, or a list
of such, that will be used as the ORDER BY clause
of the OVER construct.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>This function is also available from the <code class="xref py py-data docutils literal"><span class="pre">func</span></code>
construct itself via the <code class="xref py py-meth docutils literal"><span class="pre">FunctionElement.over()</span></code> method.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 0.7.</span></p>
</div>
</dd></dl>

<dl class="function">
<dt id="db_repository.versions.002_migration.select">
<code class="descclassname">db_repository.versions.002_migration.</code><code class="descname">select</code><span class="sig-paren">(</span><em>columns=None</em>, <em>whereclause=None</em>, <em>from_obj=None</em>, <em>distinct=False</em>, <em>having=None</em>, <em>correlate=True</em>, <em>prefixes=None</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#db_repository.versions.002_migration.select" title="Permalink to this definition">¶</a></dt>
<dd><p>Construct a new <code class="xref py py-class docutils literal"><span class="pre">Select</span></code>.</p>
<p>Similar functionality is also available via the
<code class="xref py py-meth docutils literal"><span class="pre">FromClause.select()</span></code> method on any <code class="xref py py-class docutils literal"><span class="pre">FromClause</span></code>.</p>
<p>All arguments which accept <code class="xref py py-class docutils literal"><span class="pre">ClauseElement</span></code> arguments also
accept string arguments, which will be converted as appropriate into
either <a class="reference internal" href="#db_repository.versions.002_migration.text" title="db_repository.versions.002_migration.text"><code class="xref py py-func docutils literal"><span class="pre">text()</span></code></a> or <code class="xref py py-func docutils literal"><span class="pre">literal_column()</span></code> constructs.</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><span class="xref std std-ref">coretutorial_selecting</span> - Core Tutorial description of
<a class="reference internal" href="#db_repository.versions.002_migration.select" title="db_repository.versions.002_migration.select"><code class="xref py py-func docutils literal"><span class="pre">select()</span></code></a>.</p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>columns</strong> &#8211; <p>A list of <code class="xref py py-class docutils literal"><span class="pre">ColumnElement</span></code> or <code class="xref py py-class docutils literal"><span class="pre">FromClause</span></code>
objects which will form the columns clause of the resulting
statement.   For those objects that are instances of
<code class="xref py py-class docutils literal"><span class="pre">FromClause</span></code> (typically <code class="xref py py-class docutils literal"><span class="pre">Table</span></code> or <code class="xref py py-class docutils literal"><span class="pre">Alias</span></code>
objects), the <code class="xref py py-attr docutils literal"><span class="pre">FromClause.c</span></code> collection is extracted
to form a collection of <code class="xref py py-class docutils literal"><span class="pre">ColumnElement</span></code> objects.</p>
<p>This parameter will also accept <code class="xref py py-class docutils literal"><span class="pre">Text</span></code> constructs as
given, as well as ORM-mapped classes.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The <a href="#id53"><span class="problematic" id="id54">:paramref:`.select.columns`</span></a> parameter is not available
in the method form of <a class="reference internal" href="#db_repository.versions.002_migration.select" title="db_repository.versions.002_migration.select"><code class="xref py py-func docutils literal"><span class="pre">select()</span></code></a>, e.g.
<code class="xref py py-meth docutils literal"><span class="pre">FromClause.select()</span></code>.</p>
</div>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p><code class="xref py py-meth docutils literal"><span class="pre">Select.column()</span></code></p>
<p class="last"><code class="xref py py-meth docutils literal"><span class="pre">Select.with_only_columns()</span></code></p>
</div>
</li>
<li><strong>whereclause</strong> &#8211; <p>A <code class="xref py py-class docutils literal"><span class="pre">ClauseElement</span></code> expression which will be used to form the
<code class="docutils literal"><span class="pre">WHERE</span></code> clause.   It is typically preferable to add WHERE
criterion to an existing <code class="xref py py-class docutils literal"><span class="pre">Select</span></code> using method chaining
with <code class="xref py py-meth docutils literal"><span class="pre">Select.where()</span></code>.</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><code class="xref py py-meth docutils literal"><span class="pre">Select.where()</span></code></p>
</div>
</li>
<li><strong>from_obj</strong> &#8211; <p>A list of <code class="xref py py-class docutils literal"><span class="pre">ClauseElement</span></code> objects which will be added to the
<code class="docutils literal"><span class="pre">FROM</span></code> clause of the resulting statement.  This is equivalent
to calling <code class="xref py py-meth docutils literal"><span class="pre">Select.select_from()</span></code> using method chaining on
an existing <code class="xref py py-class docutils literal"><span class="pre">Select</span></code> object.</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><code class="xref py py-meth docutils literal"><span class="pre">Select.select_from()</span></code> - full description of explicit
FROM clause specification.</p>
</div>
</li>
<li><strong>autocommit</strong> &#8211; <p>Deprecated.  Use <code class="docutils literal"><span class="pre">.execution_options(autocommit=&lt;True|False&gt;)</span></code>
to set the autocommit option.</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><code class="xref py py-meth docutils literal"><span class="pre">Executable.execution_options()</span></code></p>
</div>
</li>
<li><strong>bind=None</strong> &#8211; an <code class="xref py py-class docutils literal"><span class="pre">Engine</span></code> or <code class="xref py py-class docutils literal"><span class="pre">Connection</span></code> instance
to which the
resulting <code class="xref py py-class docutils literal"><span class="pre">Select</span></code> object will be bound.  The
<code class="xref py py-class docutils literal"><span class="pre">Select</span></code> object will otherwise automatically bind to
whatever <code class="xref py py-class docutils literal"><span class="pre">Connectable</span></code> instances can be located within
its contained <code class="xref py py-class docutils literal"><span class="pre">ClauseElement</span></code> members.</li>
<li><strong>correlate=True</strong> &#8211; <p>indicates that this <code class="xref py py-class docutils literal"><span class="pre">Select</span></code> object should have its
contained <code class="xref py py-class docutils literal"><span class="pre">FromClause</span></code> elements &#8220;correlated&#8221; to an enclosing
<code class="xref py py-class docutils literal"><span class="pre">Select</span></code> object.  It is typically preferable to specify
correlations on an existing <code class="xref py py-class docutils literal"><span class="pre">Select</span></code> construct using
<code class="xref py py-meth docutils literal"><span class="pre">Select.correlate()</span></code>.</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><code class="xref py py-meth docutils literal"><span class="pre">Select.correlate()</span></code> - full description of correlation.</p>
</div>
</li>
<li><strong>distinct=False</strong> &#8211; <p>when <code class="docutils literal"><span class="pre">True</span></code>, applies a <code class="docutils literal"><span class="pre">DISTINCT</span></code> qualifier to the columns
clause of the resulting statement.</p>
<p>The boolean argument may also be a column expression or list
of column expressions - this is a special calling form which
is understood by the Postgresql dialect to render the
<code class="docutils literal"><span class="pre">DISTINCT</span> <span class="pre">ON</span> <span class="pre">(&lt;columns&gt;)</span></code> syntax.</p>
<p><code class="docutils literal"><span class="pre">distinct</span></code> is also available on an existing <code class="xref py py-class docutils literal"><span class="pre">Select</span></code>
object via the <code class="xref py py-meth docutils literal"><span class="pre">distinct()</span></code> method.</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><code class="xref py py-meth docutils literal"><span class="pre">Select.distinct()</span></code></p>
</div>
</li>
<li><strong>for_update=False</strong> &#8211; <blockquote>
<div>when <code class="docutils literal"><span class="pre">True</span></code>, applies <code class="docutils literal"><span class="pre">FOR</span> <span class="pre">UPDATE</span></code> to the end of the
resulting statement.<div class="deprecated">
<p><span class="versionmodified">Deprecated since version 0.9.0: </span>- use
<code class="xref py py-meth docutils literal"><span class="pre">Select.with_for_update()</span></code> to specify the
structure of the <code class="docutils literal"><span class="pre">FOR</span> <span class="pre">UPDATE</span></code> clause.</p>
</div>
<p><code class="docutils literal"><span class="pre">for_update</span></code> accepts various string values interpreted by
specific backends, including:</p>
<ul>
<li><code class="docutils literal"><span class="pre">&quot;read&quot;</span></code> - on MySQL, translates to <code class="docutils literal"><span class="pre">LOCK</span> <span class="pre">IN</span> <span class="pre">SHARE</span> <span class="pre">MODE</span></code>;
on Postgresql, translates to <code class="docutils literal"><span class="pre">FOR</span> <span class="pre">SHARE</span></code>.</li>
<li><code class="docutils literal"><span class="pre">&quot;nowait&quot;</span></code> - on Postgresql and Oracle, translates to
<code class="docutils literal"><span class="pre">FOR</span> <span class="pre">UPDATE</span> <span class="pre">NOWAIT</span></code>.</li>
<li><code class="docutils literal"><span class="pre">&quot;read_nowait&quot;</span></code> - on Postgresql, translates to
<code class="docutils literal"><span class="pre">FOR</span> <span class="pre">SHARE</span> <span class="pre">NOWAIT</span></code>.</li>
</ul>
</div></blockquote>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><code class="xref py py-meth docutils literal"><span class="pre">Select.with_for_update()</span></code> - improved API for
specifying the <code class="docutils literal"><span class="pre">FOR</span> <span class="pre">UPDATE</span></code> clause.</p>
</div>
</li>
<li><strong>group_by</strong> &#8211; <p>a list of <code class="xref py py-class docutils literal"><span class="pre">ClauseElement</span></code> objects which will comprise the
<code class="docutils literal"><span class="pre">GROUP</span> <span class="pre">BY</span></code> clause of the resulting select.  This parameter
is typically specified more naturally using the
<code class="xref py py-meth docutils literal"><span class="pre">Select.group_by()</span></code> method on an existing <code class="xref py py-class docutils literal"><span class="pre">Select</span></code>.</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><code class="xref py py-meth docutils literal"><span class="pre">Select.group_by()</span></code></p>
</div>
</li>
<li><strong>having</strong> &#8211; <p>a <code class="xref py py-class docutils literal"><span class="pre">ClauseElement</span></code> that will comprise the <code class="docutils literal"><span class="pre">HAVING</span></code> clause
of the resulting select when <code class="docutils literal"><span class="pre">GROUP</span> <span class="pre">BY</span></code> is used.  This parameter
is typically specified more naturally using the
<code class="xref py py-meth docutils literal"><span class="pre">Select.having()</span></code> method on an existing <code class="xref py py-class docutils literal"><span class="pre">Select</span></code>.</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><code class="xref py py-meth docutils literal"><span class="pre">Select.having()</span></code></p>
</div>
</li>
<li><strong>limit=None</strong> &#8211; <p>a numerical value which usually renders as a <code class="docutils literal"><span class="pre">LIMIT</span></code>
expression in the resulting select.  Backends that don&#8217;t
support <code class="docutils literal"><span class="pre">LIMIT</span></code> will attempt to provide similar
functionality.    This parameter is typically specified more naturally
using the <code class="xref py py-meth docutils literal"><span class="pre">Select.limit()</span></code> method on an existing
<code class="xref py py-class docutils literal"><span class="pre">Select</span></code>.</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><code class="xref py py-meth docutils literal"><span class="pre">Select.limit()</span></code></p>
</div>
</li>
<li><strong>offset=None</strong> &#8211; <p>a numeric value which usually renders as an <code class="docutils literal"><span class="pre">OFFSET</span></code>
expression in the resulting select.  Backends that don&#8217;t
support <code class="docutils literal"><span class="pre">OFFSET</span></code> will attempt to provide similar
functionality.  This parameter is typically specified more naturally
using the <code class="xref py py-meth docutils literal"><span class="pre">Select.offset()</span></code> method on an existing
<code class="xref py py-class docutils literal"><span class="pre">Select</span></code>.</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><code class="xref py py-meth docutils literal"><span class="pre">Select.offset()</span></code></p>
</div>
</li>
<li><strong>order_by</strong> &#8211; <p>a scalar or list of <code class="xref py py-class docutils literal"><span class="pre">ClauseElement</span></code> objects which will
comprise the <code class="docutils literal"><span class="pre">ORDER</span> <span class="pre">BY</span></code> clause of the resulting select.
This parameter is typically specified more naturally using the
<code class="xref py py-meth docutils literal"><span class="pre">Select.order_by()</span></code> method on an existing <code class="xref py py-class docutils literal"><span class="pre">Select</span></code>.</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><code class="xref py py-meth docutils literal"><span class="pre">Select.order_by()</span></code></p>
</div>
</li>
<li><strong>use_labels=False</strong> &#8211; <p>when <code class="docutils literal"><span class="pre">True</span></code>, the statement will be generated using labels
for each column in the columns clause, which qualify each
column with its parent table&#8217;s (or aliases) name so that name
conflicts between columns in different tables don&#8217;t occur.
The format of the label is &lt;tablename&gt;_&lt;column&gt;.  The &#8220;c&#8221;
collection of the resulting <code class="xref py py-class docutils literal"><span class="pre">Select</span></code> object will use these
names as well for targeting column members.</p>
<p>This parameter can also be specified on an existing
<code class="xref py py-class docutils literal"><span class="pre">Select</span></code> object using the <code class="xref py py-meth docutils literal"><span class="pre">Select.apply_labels()</span></code>
method.</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><code class="xref py py-meth docutils literal"><span class="pre">Select.apply_labels()</span></code></p>
</div>
</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="db_repository.versions.002_migration.text">
<code class="descclassname">db_repository.versions.002_migration.</code><code class="descname">text</code><span class="sig-paren">(</span><em>text</em>, <em>bind=None</em>, <em>bindparams=None</em>, <em>typemap=None</em>, <em>autocommit=None</em><span class="sig-paren">)</span><a class="headerlink" href="#db_repository.versions.002_migration.text" title="Permalink to this definition">¶</a></dt>
<dd><p>Construct a new <code class="xref py py-class docutils literal"><span class="pre">TextClause</span></code> clause, representing
a textual SQL string directly.</p>
<p>E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">text</span>

<span class="n">t</span> <span class="o">=</span> <span class="n">text</span><span class="p">(</span><span class="s">&quot;SELECT * FROM users&quot;</span><span class="p">)</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">connection</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">t</span><span class="p">)</span>
</pre></div>
</div>
<p>The advantages <a class="reference internal" href="#db_repository.versions.002_migration.text" title="db_repository.versions.002_migration.text"><code class="xref py py-func docutils literal"><span class="pre">text()</span></code></a> provides over a plain string are
backend-neutral support for bind parameters, per-statement
execution options, as well as
bind parameter and result-column typing behavior, allowing
SQLAlchemy type constructs to play a role when executing
a statement that is specified literally.  The construct can also
be provided with a <code class="docutils literal"><span class="pre">.c</span></code> collection of column elements, allowing
it to be embedded in other SQL expression constructs as a subquery.</p>
<p>Bind parameters are specified by name, using the format <code class="docutils literal"><span class="pre">:name</span></code>.
E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">t</span> <span class="o">=</span> <span class="n">text</span><span class="p">(</span><span class="s">&quot;SELECT * FROM users WHERE id=:user_id&quot;</span><span class="p">)</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">connection</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">t</span><span class="p">,</span> <span class="n">user_id</span><span class="o">=</span><span class="mi">12</span><span class="p">)</span>
</pre></div>
</div>
<p>For SQL statements where a colon is required verbatim, as within
an inline string, use a backslash to escape:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">t</span> <span class="o">=</span> <span class="n">text</span><span class="p">(</span><span class="s">&quot;SELECT * FROM users WHERE name=&#39;\:username&#39;&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>The <code class="xref py py-class docutils literal"><span class="pre">TextClause</span></code> construct includes methods which can
provide information about the bound parameters as well as the column
values which would be returned from the textual statement, assuming
it&#8217;s an executable SELECT type of statement.  The
<code class="xref py py-meth docutils literal"><span class="pre">TextClause.bindparams()</span></code> method is used to provide bound
parameter detail, and <code class="xref py py-meth docutils literal"><span class="pre">TextClause.columns()</span></code> method allows
specification of return columns including names and types:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">t</span> <span class="o">=</span> <span class="n">text</span><span class="p">(</span><span class="s">&quot;SELECT * FROM users WHERE id=:user_id&quot;</span><span class="p">)</span><span class="o">.</span>\
        <span class="n">bindparams</span><span class="p">(</span><span class="n">user_id</span><span class="o">=</span><span class="mi">7</span><span class="p">)</span><span class="o">.</span>\
        <span class="n">columns</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="n">Integer</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="n">String</span><span class="p">)</span>

<span class="k">for</span> <span class="nb">id</span><span class="p">,</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">connection</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">t</span><span class="p">):</span>
    <span class="k">print</span><span class="p">(</span><span class="nb">id</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>
</pre></div>
</div>
<p>The <a class="reference internal" href="#db_repository.versions.002_migration.text" title="db_repository.versions.002_migration.text"><code class="xref py py-func docutils literal"><span class="pre">text()</span></code></a> construct is used internally in cases when
a literal string is specified for part of a larger query, such as
when a string is specified to the <code class="xref py py-meth docutils literal"><span class="pre">Select.where()</span></code> method of
<code class="xref py py-class docutils literal"><span class="pre">Select</span></code>.  In those cases, the same
bind parameter syntax is applied:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">s</span> <span class="o">=</span> <span class="n">select</span><span class="p">([</span><span class="n">users</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="n">users</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">name</span><span class="p">])</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="s">&quot;id=:user_id&quot;</span><span class="p">)</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">connection</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="n">user_id</span><span class="o">=</span><span class="mi">12</span><span class="p">)</span>
</pre></div>
</div>
<p>Using <a class="reference internal" href="#db_repository.versions.002_migration.text" title="db_repository.versions.002_migration.text"><code class="xref py py-func docutils literal"><span class="pre">text()</span></code></a> explicitly usually implies the construction
of a full, standalone statement.   As such, SQLAlchemy refers
to it as an <code class="xref py py-class docutils literal"><span class="pre">Executable</span></code> object, and it supports
the <code class="xref py py-meth docutils literal"><span class="pre">Executable.execution_options()</span></code> method.  For example,
a <a class="reference internal" href="#db_repository.versions.002_migration.text" title="db_repository.versions.002_migration.text"><code class="xref py py-func docutils literal"><span class="pre">text()</span></code></a> construct that should be subject to &#8220;autocommit&#8221;
can be set explicitly so using the
<a href="#id55"><span class="problematic" id="id56">:paramref:`.Connection.execution_options.autocommit`</span></a> option:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">t</span> <span class="o">=</span> <span class="n">text</span><span class="p">(</span><span class="s">&quot;EXEC my_procedural_thing()&quot;</span><span class="p">)</span><span class="o">.</span>\
        <span class="n">execution_options</span><span class="p">(</span><span class="n">autocommit</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
</pre></div>
</div>
<p>Note that SQLAlchemy&#8217;s usual &#8220;autocommit&#8221; behavior applies to
<a class="reference internal" href="#db_repository.versions.002_migration.text" title="db_repository.versions.002_migration.text"><code class="xref py py-func docutils literal"><span class="pre">text()</span></code></a> constructs implicitly - that is, statements which begin
with a phrase such as <code class="docutils literal"><span class="pre">INSERT</span></code>, <code class="docutils literal"><span class="pre">UPDATE</span></code>, <code class="docutils literal"><span class="pre">DELETE</span></code>,
or a variety of other phrases specific to certain backends, will
be eligible for autocommit if no transaction is in progress.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>text</strong> &#8211; the text of the SQL statement to be created.  use <code class="docutils literal"><span class="pre">:&lt;param&gt;</span></code>
to specify bind parameters; they will be compiled to their
engine-specific format.</li>
<li><strong>autocommit</strong> &#8211; Deprecated.  Use .execution_options(autocommit=&lt;True|False&gt;)
to set the autocommit option.</li>
<li><strong>bind</strong> &#8211; an optional connection or engine to be used for this text query.</li>
<li><strong>bindparams</strong> &#8211; <p>Deprecated.  A list of <a class="reference internal" href="#db_repository.versions.002_migration.bindparam" title="db_repository.versions.002_migration.bindparam"><code class="xref py py-func docutils literal"><span class="pre">bindparam()</span></code></a> instances used to
provide information about parameters embedded in the statement.
This argument now invokes the <code class="xref py py-meth docutils literal"><span class="pre">TextClause.bindparams()</span></code>
method on the construct before returning it.  E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">stmt</span> <span class="o">=</span> <span class="n">text</span><span class="p">(</span><span class="s">&quot;SELECT * FROM table WHERE id=:id&quot;</span><span class="p">,</span>
          <span class="n">bindparams</span><span class="o">=</span><span class="p">[</span><span class="n">bindparam</span><span class="p">(</span><span class="s">&#39;id&#39;</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">type_</span><span class="o">=</span><span class="n">Integer</span><span class="p">)])</span>
</pre></div>
</div>
<p>Is equivalent to:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">stmt</span> <span class="o">=</span> <span class="n">text</span><span class="p">(</span><span class="s">&quot;SELECT * FROM table WHERE id=:id&quot;</span><span class="p">)</span><span class="o">.</span>\
          <span class="n">bindparams</span><span class="p">(</span><span class="n">bindparam</span><span class="p">(</span><span class="s">&#39;id&#39;</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">type_</span><span class="o">=</span><span class="n">Integer</span><span class="p">))</span>
</pre></div>
</div>
<div class="deprecated">
<p><span class="versionmodified">Deprecated since version 0.9.0: </span>the <code class="xref py py-meth docutils literal"><span class="pre">TextClause.bindparams()</span></code> method
supersedes the <code class="docutils literal"><span class="pre">bindparams</span></code> argument to <a class="reference internal" href="#db_repository.versions.002_migration.text" title="db_repository.versions.002_migration.text"><code class="xref py py-func docutils literal"><span class="pre">text()</span></code></a>.</p>
</div>
</li>
<li><strong>typemap</strong> &#8211; <p>Deprecated.  A dictionary mapping the names of columns
represented in the columns clause of a <code class="docutils literal"><span class="pre">SELECT</span></code> statement
to type objects,
which will be used to perform post-processing on columns within
the result set.  This parameter now invokes the
<code class="xref py py-meth docutils literal"><span class="pre">TextClause.columns()</span></code> method, which returns a
<code class="xref py py-class docutils literal"><span class="pre">TextAsFrom</span></code> construct that gains a <code class="docutils literal"><span class="pre">.c</span></code> collection and
can be embedded in other expressions.  E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">stmt</span> <span class="o">=</span> <span class="n">text</span><span class="p">(</span><span class="s">&quot;SELECT * FROM table&quot;</span><span class="p">,</span>
              <span class="n">typemap</span><span class="o">=</span><span class="p">{</span><span class="s">&#39;id&#39;</span><span class="p">:</span> <span class="n">Integer</span><span class="p">,</span> <span class="s">&#39;name&#39;</span><span class="p">:</span> <span class="n">String</span><span class="p">},</span>
          <span class="p">)</span>
</pre></div>
</div>
<p>Is equivalent to:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">stmt</span> <span class="o">=</span> <span class="n">text</span><span class="p">(</span><span class="s">&quot;SELECT * FROM table&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">columns</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="n">Integer</span><span class="p">,</span>
                                           <span class="n">name</span><span class="o">=</span><span class="n">String</span><span class="p">)</span>
</pre></div>
</div>
<p>Or alternatively:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">sqlalchemy.sql</span> <span class="kn">import</span> <span class="n">column</span>
<span class="n">stmt</span> <span class="o">=</span> <span class="n">text</span><span class="p">(</span><span class="s">&quot;SELECT * FROM table&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">columns</span><span class="p">(</span>
                      <span class="n">column</span><span class="p">(</span><span class="s">&#39;id&#39;</span><span class="p">,</span> <span class="n">Integer</span><span class="p">),</span>
                      <span class="n">column</span><span class="p">(</span><span class="s">&#39;name&#39;</span><span class="p">,</span> <span class="n">String</span><span class="p">)</span>
                  <span class="p">)</span>
</pre></div>
</div>
<div class="deprecated">
<p><span class="versionmodified">Deprecated since version 0.9.0: </span>the <code class="xref py py-meth docutils literal"><span class="pre">TextClause.columns()</span></code> method
supersedes the <code class="docutils literal"><span class="pre">typemap</span></code> argument to <a class="reference internal" href="#db_repository.versions.002_migration.text" title="db_repository.versions.002_migration.text"><code class="xref py py-func docutils literal"><span class="pre">text()</span></code></a>.</p>
</div>
</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="db_repository.versions.002_migration.true">
<code class="descclassname">db_repository.versions.002_migration.</code><code class="descname">true</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#db_repository.versions.002_migration.true" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a constant <code class="xref py py-class docutils literal"><span class="pre">True_</span></code> construct.</p>
<p>E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">true</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="n">select</span><span class="p">([</span><span class="n">t</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">x</span><span class="p">])</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">true</span><span class="p">())</span>
<span class="go">SELECT x FROM t WHERE true</span>
</pre></div>
</div>
<p>A backend which does not support true/false constants will render as
an expression against 1 or 0:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="n">select</span><span class="p">([</span><span class="n">t</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">x</span><span class="p">])</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">true</span><span class="p">())</span>
<span class="go">SELECT x FROM t WHERE 1 = 1</span>
</pre></div>
</div>
<p>The <a class="reference internal" href="#db_repository.versions.002_migration.true" title="db_repository.versions.002_migration.true"><code class="xref py py-func docutils literal"><span class="pre">true()</span></code></a> and <a class="reference internal" href="#db_repository.versions.002_migration.false" title="db_repository.versions.002_migration.false"><code class="xref py py-func docutils literal"><span class="pre">false()</span></code></a> constants also feature
&#8220;short circuit&#8221; operation within an <a class="reference internal" href="#db_repository.versions.002_migration.and_" title="db_repository.versions.002_migration.and_"><code class="xref py py-func docutils literal"><span class="pre">and_()</span></code></a> or <a class="reference internal" href="#db_repository.versions.002_migration.or_" title="db_repository.versions.002_migration.or_"><code class="xref py py-func docutils literal"><span class="pre">or_()</span></code></a>
conjunction:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="n">select</span><span class="p">([</span><span class="n">t</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">x</span><span class="p">])</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">or_</span><span class="p">(</span><span class="n">t</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">x</span> <span class="o">&gt;</span> <span class="mi">5</span><span class="p">,</span> <span class="n">true</span><span class="p">()))</span>
<span class="go">SELECT x FROM t WHERE true</span>

<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="n">select</span><span class="p">([</span><span class="n">t</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">x</span><span class="p">])</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">and_</span><span class="p">(</span><span class="n">t</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">x</span> <span class="o">&gt;</span> <span class="mi">5</span><span class="p">,</span> <span class="n">false</span><span class="p">()))</span>
<span class="go">SELECT x FROM t WHERE false</span>
</pre></div>
</div>
<div class="versionchanged">
<p><span class="versionmodified">Changed in version 0.9: </span><a class="reference internal" href="#db_repository.versions.002_migration.true" title="db_repository.versions.002_migration.true"><code class="xref py py-func docutils literal"><span class="pre">true()</span></code></a> and <a class="reference internal" href="#db_repository.versions.002_migration.false" title="db_repository.versions.002_migration.false"><code class="xref py py-func docutils literal"><span class="pre">false()</span></code></a> feature
better integrated behavior within conjunctions and on dialects
that don&#8217;t support true/false constants.</p>
</div>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="#db_repository.versions.002_migration.false" title="db_repository.versions.002_migration.false"><code class="xref py py-func docutils literal"><span class="pre">false()</span></code></a></p>
</div>
</dd></dl>

<dl class="function">
<dt id="db_repository.versions.002_migration.tuple_">
<code class="descclassname">db_repository.versions.002_migration.</code><code class="descname">tuple_</code><span class="sig-paren">(</span><em>*clauses</em>, <em>**kw</em><span class="sig-paren">)</span><a class="headerlink" href="#db_repository.versions.002_migration.tuple_" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a <code class="xref py py-class docutils literal"><span class="pre">Tuple</span></code>.</p>
<p>Main usage is to produce a composite IN construct:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">tuple_</span>

<span class="n">tuple_</span><span class="p">(</span><span class="n">table</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">col1</span><span class="p">,</span> <span class="n">table</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">col2</span><span class="p">)</span><span class="o">.</span><span class="n">in_</span><span class="p">(</span>
    <span class="p">[(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">12</span><span class="p">),</span> <span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">19</span><span class="p">)]</span>
<span class="p">)</span>
</pre></div>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">The composite IN construct is not supported by all backends,
and is currently known to work on Postgresql and MySQL,
but not SQLite.   Unsupported backends will raise
a subclass of <code class="xref py py-class docutils literal"><span class="pre">DBAPIError</span></code> when such
an expression is invoked.</p>
</div>
</dd></dl>

<dl class="function">
<dt id="db_repository.versions.002_migration.union">
<code class="descclassname">db_repository.versions.002_migration.</code><code class="descname">union</code><span class="sig-paren">(</span><em>*selects</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#db_repository.versions.002_migration.union" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a <code class="docutils literal"><span class="pre">UNION</span></code> of multiple selectables.</p>
<p>The returned object is an instance of
<code class="xref py py-class docutils literal"><span class="pre">CompoundSelect</span></code>.</p>
<p>A similar <a class="reference internal" href="#db_repository.versions.002_migration.union" title="db_repository.versions.002_migration.union"><code class="xref py py-func docutils literal"><span class="pre">union()</span></code></a> method is available on all
<code class="xref py py-class docutils literal"><span class="pre">FromClause</span></code> subclasses.</p>
<dl class="docutils">
<dt>*selects</dt>
<dd>a list of <code class="xref py py-class docutils literal"><span class="pre">Select</span></code> instances.</dd>
<dt>**kwargs</dt>
<dd>available keyword arguments are the same as those of
<a class="reference internal" href="#db_repository.versions.002_migration.select" title="db_repository.versions.002_migration.select"><code class="xref py py-func docutils literal"><span class="pre">select()</span></code></a>.</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="db_repository.versions.002_migration.union_all">
<code class="descclassname">db_repository.versions.002_migration.</code><code class="descname">union_all</code><span class="sig-paren">(</span><em>*selects</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#db_repository.versions.002_migration.union_all" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a <code class="docutils literal"><span class="pre">UNION</span> <span class="pre">ALL</span></code> of multiple selectables.</p>
<p>The returned object is an instance of
<code class="xref py py-class docutils literal"><span class="pre">CompoundSelect</span></code>.</p>
<p>A similar <a class="reference internal" href="#db_repository.versions.002_migration.union_all" title="db_repository.versions.002_migration.union_all"><code class="xref py py-func docutils literal"><span class="pre">union_all()</span></code></a> method is available on all
<code class="xref py py-class docutils literal"><span class="pre">FromClause</span></code> subclasses.</p>
<dl class="docutils">
<dt>*selects</dt>
<dd>a list of <code class="xref py py-class docutils literal"><span class="pre">Select</span></code> instances.</dd>
<dt>**kwargs</dt>
<dd>available keyword arguments are the same as those of
<a class="reference internal" href="#db_repository.versions.002_migration.select" title="db_repository.versions.002_migration.select"><code class="xref py py-func docutils literal"><span class="pre">select()</span></code></a>.</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="db_repository.versions.002_migration.update">
<code class="descclassname">db_repository.versions.002_migration.</code><code class="descname">update</code><span class="sig-paren">(</span><em>table</em>, <em>whereclause=None</em>, <em>values=None</em>, <em>inline=False</em>, <em>bind=None</em>, <em>prefixes=None</em>, <em>returning=None</em>, <em>return_defaults=False</em>, <em>**dialect_kw</em><span class="sig-paren">)</span><a class="headerlink" href="#db_repository.versions.002_migration.update" title="Permalink to this definition">¶</a></dt>
<dd><p>Construct an <code class="xref py py-class docutils literal"><span class="pre">Update</span></code> object.</p>
<p>E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">update</span>

<span class="n">stmt</span> <span class="o">=</span> <span class="n">update</span><span class="p">(</span><span class="n">users</span><span class="p">)</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">users</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">id</span><span class="o">==</span><span class="mi">5</span><span class="p">)</span><span class="o">.</span>\
        <span class="n">values</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&#39;user #5&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Similar functionality is available via the
<code class="xref py py-meth docutils literal"><span class="pre">update()</span></code> method on
<code class="xref py py-class docutils literal"><span class="pre">Table</span></code>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">stmt</span> <span class="o">=</span> <span class="n">users</span><span class="o">.</span><span class="n">update</span><span class="p">()</span><span class="o">.</span>\
            <span class="n">where</span><span class="p">(</span><span class="n">users</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">id</span><span class="o">==</span><span class="mi">5</span><span class="p">)</span><span class="o">.</span>\
            <span class="n">values</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&#39;user #5&#39;</span><span class="p">)</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>table</strong> &#8211; A <code class="xref py py-class docutils literal"><span class="pre">Table</span></code> object representing the database
table to be updated.</li>
<li><strong>whereclause</strong> &#8211; <p>Optional SQL expression describing the <code class="docutils literal"><span class="pre">WHERE</span></code>
condition of the <code class="docutils literal"><span class="pre">UPDATE</span></code> statement.   Modern applications
may prefer to use the generative <code class="xref py py-meth docutils literal"><span class="pre">where()</span></code>
method to specify the <code class="docutils literal"><span class="pre">WHERE</span></code> clause.</p>
<p>The WHERE clause can refer to multiple tables.
For databases which support this, an <code class="docutils literal"><span class="pre">UPDATE</span> <span class="pre">FROM</span></code> clause will
be generated, or on MySQL, a multi-table update.  The statement
will fail on databases that don&#8217;t have support for multi-table
update statements.  A SQL-standard method of referring to
additional tables in the WHERE clause is to use a correlated
subquery:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">users</span><span class="o">.</span><span class="n">update</span><span class="p">()</span><span class="o">.</span><span class="n">values</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&#39;ed&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">where</span><span class="p">(</span>
        <span class="n">users</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">name</span><span class="o">==</span><span class="n">select</span><span class="p">([</span><span class="n">addresses</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">email_address</span><span class="p">])</span><span class="o">.</span>\
                    <span class="n">where</span><span class="p">(</span><span class="n">addresses</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">user_id</span><span class="o">==</span><span class="n">users</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">id</span><span class="p">)</span><span class="o">.</span>\
                    <span class="n">as_scalar</span><span class="p">()</span>
        <span class="p">)</span>
</pre></div>
</div>
<div class="versionchanged">
<p><span class="versionmodified">Changed in version 0.7.4: </span>The WHERE clause can refer to multiple tables.</p>
</div>
</li>
<li><strong>values</strong> &#8211; <p>Optional dictionary which specifies the <code class="docutils literal"><span class="pre">SET</span></code> conditions of the
<code class="docutils literal"><span class="pre">UPDATE</span></code>.  If left as <code class="docutils literal"><span class="pre">None</span></code>, the <code class="docutils literal"><span class="pre">SET</span></code>
conditions are determined from those parameters passed to the
statement during the execution and/or compilation of the
statement.   When compiled standalone without any parameters,
the <code class="docutils literal"><span class="pre">SET</span></code> clause generates for all columns.</p>
<p>Modern applications may prefer to use the generative
<code class="xref py py-meth docutils literal"><span class="pre">Update.values()</span></code> method to set the values of the
UPDATE statement.</p>
</li>
<li><strong>inline</strong> &#8211; if True, no attempt will be made to retrieve the
SQL-generated default values to be provided within the statement;
in particular,
this allows SQL expressions to be rendered &#8216;inline&#8217; within the
statement without the need to pre-execute them beforehand; for
backends that support &#8220;returning&#8221;, this turns off the &#8220;implicit
returning&#8221; feature for the statement.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>If both <code class="docutils literal"><span class="pre">values</span></code> and compile-time bind parameters are present, the
compile-time bind parameters override the information specified
within <code class="docutils literal"><span class="pre">values</span></code> on a per-key basis.</p>
<p>The keys within <code class="docutils literal"><span class="pre">values</span></code> can be either <code class="xref py py-class docutils literal"><span class="pre">Column</span></code>
objects or their string identifiers (specifically the &#8220;key&#8221; of the
<code class="xref py py-class docutils literal"><span class="pre">Column</span></code>, normally but not necessarily equivalent to
its &#8220;name&#8221;).  Normally, the
<code class="xref py py-class docutils literal"><span class="pre">Column</span></code> objects used here are expected to be
part of the target <code class="xref py py-class docutils literal"><span class="pre">Table</span></code> that is the table
to be updated.  However when using MySQL, a multiple-table
UPDATE statement can refer to columns from any of
the tables referred to in the WHERE clause.</p>
<p>The values referred to in <code class="docutils literal"><span class="pre">values</span></code> are typically:</p>
<ul class="simple">
<li>a literal data value (i.e. string, number, etc.)</li>
<li>a SQL expression, such as a related <code class="xref py py-class docutils literal"><span class="pre">Column</span></code>,
a scalar-returning <a class="reference internal" href="#db_repository.versions.002_migration.select" title="db_repository.versions.002_migration.select"><code class="xref py py-func docutils literal"><span class="pre">select()</span></code></a> construct,
etc.</li>
</ul>
<p>When combining <a class="reference internal" href="#db_repository.versions.002_migration.select" title="db_repository.versions.002_migration.select"><code class="xref py py-func docutils literal"><span class="pre">select()</span></code></a> constructs within the values
clause of an <a class="reference internal" href="#db_repository.versions.002_migration.update" title="db_repository.versions.002_migration.update"><code class="xref py py-func docutils literal"><span class="pre">update()</span></code></a> construct,
the subquery represented by the <a class="reference internal" href="#db_repository.versions.002_migration.select" title="db_repository.versions.002_migration.select"><code class="xref py py-func docutils literal"><span class="pre">select()</span></code></a> should be
<em>correlated</em> to the parent table, that is, providing criterion
which links the table inside the subquery to the outer table
being updated:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">users</span><span class="o">.</span><span class="n">update</span><span class="p">()</span><span class="o">.</span><span class="n">values</span><span class="p">(</span>
        <span class="n">name</span><span class="o">=</span><span class="n">select</span><span class="p">([</span><span class="n">addresses</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">email_address</span><span class="p">])</span><span class="o">.</span>\
                <span class="n">where</span><span class="p">(</span><span class="n">addresses</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">user_id</span><span class="o">==</span><span class="n">users</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">id</span><span class="p">)</span><span class="o">.</span>\
                <span class="n">as_scalar</span><span class="p">()</span>
    <span class="p">)</span>
</pre></div>
</div>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><span class="xref std std-ref">inserts_and_updates</span> - SQL Expression
Language Tutorial</p>
</div>
</dd></dl>

<dl class="function">
<dt id="db_repository.versions.002_migration.upgrade">
<code class="descclassname">db_repository.versions.002_migration.</code><code class="descname">upgrade</code><span class="sig-paren">(</span><em>migrate_engine</em><span class="sig-paren">)</span><a class="headerlink" href="#db_repository.versions.002_migration.upgrade" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
<div class="section" id="module-db_repository.versions">
<span id="module-contents"></span><h2>Module contents<a class="headerlink" href="#module-db_repository.versions" title="Permalink to this headline">¶</a></h2>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">db_repository.versions package</a><ul>
<li><a class="reference internal" href="#submodules">Submodules</a></li>
<li><a class="reference internal" href="#module-db_repository.versions.001_migration">db_repository.versions.001_migration module</a></li>
<li><a class="reference internal" href="#module-db_repository.versions.002_migration">db_repository.versions.002_migration module</a></li>
<li><a class="reference internal" href="#module-db_repository.versions">Module contents</a></li>
</ul>
</li>
</ul>

  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/db_repository.versions.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2015, The elementalists.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.3.1</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.3</a>
      
      |
      <a href="_sources/db_repository.versions.txt"
          rel="nofollow">Page source</a></li>
    </div>

    

    
  </body>
</html>